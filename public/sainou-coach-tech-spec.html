<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒ â€” æŠ€è¡“ä»•æ§˜æ›¸</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;600&family=Sora:wght@400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
<style>
:root{--bg-base:#08080d;--bg-surface:#101018;--bg-raised:#181824;--bg-top:#222234;--border:rgba(255,255,255,.06);--border-focus:rgba(255,255,255,.12);--text:#eaeaf2;--text-dim:#9898ae;--text-muted:#58586e;--blue:#4a7dff;--cyan:#22d3ee;--green:#34d399;--amber:#f59e0b;--red:#ef4444;--purple:#a78bfa;--pink:#f472b6;--grad-hero:linear-gradient(135deg,#4a7dff 0%,#22d3ee 100%);--grad-success:linear-gradient(135deg,#34d399 0%,#22d3ee 100%);--grad-warn:linear-gradient(135deg,#ef4444 0%,#f59e0b 100%);--grad-vision:linear-gradient(135deg,#a78bfa 0%,#f472b6 100%);--shadow-sm:0 1px 3px rgba(0,0,0,.4);--shadow-md:0 4px 16px rgba(0,0,0,.5);--shadow-lg:0 8px 32px rgba(0,0,0,.6);--font-sans:'Noto Sans JP',-apple-system,sans-serif;--font-mono:'JetBrains Mono','Fira Code',monospace;--font-heading:'Sora','Noto Sans JP',sans-serif}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{font-family:var(--font-sans);background:var(--bg-base);color:var(--text);line-height:1.8;overflow-x:hidden;-webkit-font-smoothing:antialiased}
.container{max-width:1080px;margin:0 auto;padding:0 28px}
.page-layout{display:flex;gap:32px;align-items:flex-start}
.main-content{flex:1;min-width:0}
.mono{font-family:var(--font-mono);font-weight:600}
.headline{font-family:'Playfair Display',Georgia,serif;font-weight:900;letter-spacing:-.02em}

/* TOC Sidebar */
.toc-sidebar{position:sticky;top:24px;width:250px;flex-shrink:0;background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;padding:16px;max-height:calc(100vh - 48px);overflow-y:auto}
.toc-sidebar h3{font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);margin-bottom:10px}
.toc-sidebar a{display:block;font-size:11px;color:var(--text-dim);text-decoration:none;padding:3px 0;line-height:1.4;transition:color .15s}
.toc-sidebar a:hover{color:var(--cyan)}
.toc-num{color:var(--text-muted);margin-right:4px;font-family:var(--font-mono);font-size:10px}
.toc-part{font-size:10px;font-weight:700;color:var(--text-muted);letter-spacing:1.5px;text-transform:uppercase;margin-top:10px;padding-top:8px;border-top:1px solid var(--border)}
.toc-part:first-child{border-top:none;margin-top:0;padding-top:0}
@media(max-width:960px){.toc-sidebar{display:none}.page-layout{flex-direction:column}}

/* Hero */
.hero{padding:72px 0 20px;text-align:center;position:relative}
.hero::before{content:'';position:absolute;top:-80px;left:50%;transform:translateX(-50%);width:800px;height:800px;background:radial-gradient(circle,rgba(74,125,255,.05) 0%,transparent 65%);pointer-events:none}
.hero-badge{display:inline-block;padding:5px 14px;border:1px solid rgba(74,125,255,.25);border-radius:20px;font-size:12px;font-weight:700;color:var(--blue);letter-spacing:2.5px;text-transform:uppercase;margin-bottom:18px;background:rgba(74,125,255,.04)}
.hero h1{font-size:36px;font-weight:900;line-height:1.4;margin-bottom:14px;background:var(--grad-hero);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero-sub{font-size:15px;color:var(--text-dim);max-width:640px;margin:0 auto 28px;line-height:1.9}
.hero-meta{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;font-size:13px;color:var(--text-muted)}

/* Sections */
.section{padding:48px 0 36px;border-bottom:1px solid var(--border)}
.section:last-of-type{border-bottom:none}
.section-eyebrow{font-size:12px;font-weight:700;letter-spacing:3.5px;text-transform:uppercase;margin-bottom:10px}
.action-title{font-size:24px;font-weight:700;line-height:1.5;margin-bottom:10px;color:var(--text)}
.section-lead{font-size:15px;color:var(--text-dim);margin-bottom:24px;max-width:740px;line-height:1.9}

/* Part Divider */
.part-divider{padding:32px 0 8px;text-align:center}
.part-badge{display:inline-block;padding:6px 20px;border:2px solid;border-radius:24px;font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase}
.part-badge.a{border-color:var(--cyan);color:var(--cyan)}
.part-badge.b{border-color:var(--green);color:var(--green)}
.part-badge.c{border-color:var(--blue);color:var(--blue)}
.part-badge.d{border-color:var(--purple);color:var(--purple)}
.part-badge.e{border-color:var(--amber);color:var(--amber)}
.part-badge.f{border-color:var(--red);color:var(--red)}

/* Table */
.tbl{width:100%;border-collapse:separate;border-spacing:0;border-radius:10px;overflow:hidden;border:1px solid var(--border);margin:18px 0;font-size:13px}
.tbl thead th{background:var(--bg-raised);padding:10px 14px;font-size:11px;font-weight:700;text-align:left;letter-spacing:1px;text-transform:uppercase;color:var(--text-muted);border-bottom:1px solid var(--border)}
.tbl tbody td{padding:10px 14px;border-bottom:1px solid var(--border);vertical-align:top;background:var(--bg-surface)}
.tbl tbody tr:last-child td{border-bottom:none}
.t-name{font-weight:600;color:var(--text)}
.t-good{color:var(--green);font-weight:500}
.t-warn{color:var(--amber);font-weight:500}
.t-bad{color:var(--red);font-weight:500}
.t-blue{color:var(--blue);font-weight:500}
.t-cyan{color:var(--cyan);font-weight:500}

/* Cards */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:14px;margin:18px 0}
@media(max-width:600px){.card-grid{grid-template-columns:1fr}}
.card{background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;padding:20px;box-shadow:var(--shadow-sm);transition:transform .15s}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}
.card h4{font-size:15px;font-weight:700;margin-bottom:6px}
.card p{font-size:13px;color:var(--text-dim);line-height:1.8}
.card-badge{display:inline-block;font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:3px 10px;border-radius:4px;margin-bottom:8px}
.card-badge.green{background:rgba(52,211,153,.08);color:var(--green)}
.card-badge.blue{background:rgba(74,125,255,.08);color:var(--blue)}
.card-badge.amber{background:rgba(245,158,11,.08);color:var(--amber)}
.card-badge.purple{background:rgba(167,139,250,.08);color:var(--purple)}
.card-badge.pink{background:rgba(244,114,182,.08);color:var(--pink)}
.card-badge.red{background:rgba(239,68,68,.08);color:var(--red)}
.card-badge.cyan{background:rgba(34,211,238,.08);color:var(--cyan)}

/* KPI */
.kpi-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin:24px 0 20px}
@media(max-width:768px){.kpi-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:480px){.kpi-grid{grid-template-columns:1fr}}
.kpi-card{background:var(--bg-surface);border-radius:12px;padding:20px 14px;text-align:center;box-shadow:var(--shadow-sm);border:1px solid var(--border);transition:transform .15s}
.kpi-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}
.kpi-num{font-family:var(--font-mono);font-size:32px;font-weight:600;margin-bottom:4px}
.kpi-num.blue{background:var(--grad-hero);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.kpi-num.good{background:var(--grad-success);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.kpi-num.vision{background:var(--grad-vision);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.kpi-num.warn{background:var(--grad-warn);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.kpi-label{font-size:13px;color:var(--text-dim);font-weight:500;line-height:1.6}

/* Callouts */
.sowhat{background:rgba(239,68,68,.03);border-left:4px solid var(--red);border-radius:0 10px 10px 0;padding:16px 20px;margin:20px 0;box-shadow:var(--shadow-sm)}
.sowhat-label{font-size:11px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--red);margin-bottom:6px}
.sowhat p{font-size:14px;line-height:1.9;color:var(--text-dim)}
.sowhat strong{color:#f87171}
.insight{background:rgba(52,211,153,.03);border-left:4px solid var(--green);border-radius:0 10px 10px 0;padding:16px 20px;margin:20px 0;box-shadow:var(--shadow-sm)}
.insight-label{font-size:11px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--green);margin-bottom:6px}
.insight p{font-size:14px;line-height:1.9;color:var(--text-dim)}
.insight strong{color:var(--green)}
.note{background:rgba(74,125,255,.03);border-left:4px solid var(--blue);border-radius:0 10px 10px 0;padding:16px 20px;margin:20px 0;box-shadow:var(--shadow-sm)}
.note-label{font-size:11px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--blue);margin-bottom:6px}
.note p{font-size:14px;line-height:1.9;color:var(--text-dim)}
.note strong{color:var(--blue)}

/* Layer Stack */
.layer-stack{display:flex;flex-direction:column;gap:14px;margin:20px 0}
.layer{background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;padding:24px;position:relative;box-shadow:var(--shadow-sm)}
.layer-badge{position:absolute;top:-9px;left:18px;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:2px 10px;border-radius:4px}
.layer-badge.l1{background:var(--blue);color:#fff}
.layer-badge.l2{background:var(--cyan);color:#000}
.layer-badge.l3{background:var(--green);color:#000}
.layer-badge.l4{background:var(--purple);color:#fff}
.layer-badge.l5{background:var(--amber);color:#000}
.layer-badge.l6{background:var(--red);color:#fff}
.layer h4{font-size:17px;font-weight:700;margin-bottom:6px;margin-top:4px}
.layer p{font-size:14px;color:var(--text-dim);margin-bottom:10px;line-height:1.8}
.tech-pills{display:flex;flex-wrap:wrap;gap:5px}
.tech-pill{font-size:12px;font-family:var(--font-mono);padding:3px 9px;border-radius:5px;background:var(--bg-top);border:1px solid var(--border);color:var(--text-muted)}

/* Hub Architecture */
.arch-hub{background:var(--bg-surface);border:1px solid var(--border);border-radius:14px;padding:36px 24px;margin:20px 0;text-align:center;box-shadow:var(--shadow-sm)}
.hub-tier{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin:10px 0}
.hub-connector{font-family:var(--font-mono);font-size:18px;color:var(--text-muted);margin:6px 0}
.hub-core{display:inline-block;background:rgba(34,211,238,.06);border:2px solid rgba(34,211,238,.35);border-radius:14px;padding:16px 32px;margin:8px 0}
.hub-core-name{font-size:17px;font-weight:800;color:var(--cyan)}
.hub-core-sub{font-size:13px;color:var(--text-dim)}
.hub-node{padding:7px 14px;border-radius:8px;font-size:13px;font-weight:500;border:1px solid;text-align:center;min-width:88px}
.hub-node.primary{background:rgba(52,211,153,.06);border-color:rgba(52,211,153,.25);color:var(--green)}
.hub-node.secondary{background:var(--bg-raised);border-color:var(--border);color:var(--text-dim)}
.hub-node.migrate{background:rgba(245,158,11,.06);border-color:rgba(245,158,11,.25);color:var(--amber);font-weight:600}
.hub-node.mcp{background:rgba(74,125,255,.06);border-color:rgba(74,125,255,.25);color:var(--blue);font-weight:600}
.hub-node .node-sub{font-size:11px;color:var(--text-muted);display:block;margin-top:1px}

/* Code Block */
.code-block{background:var(--bg-raised);border:1px solid var(--border);border-radius:10px;padding:18px 20px;margin:14px 0;overflow-x:auto;font-family:var(--font-mono);font-size:12px;line-height:1.7;color:var(--text-dim)}
.code-block .kw{color:var(--purple)}
.code-block .fn{color:var(--cyan)}
.code-block .str{color:var(--green)}
.code-block .cm{color:var(--text-muted);font-style:italic}
.code-block .tp{color:var(--amber)}
.code-block .num{color:var(--pink)}
.code-label{font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:6px;display:block}

/* ER Diagram */
.er-diagram{background:var(--bg-raised);border:1px solid var(--border);border-radius:10px;padding:20px 24px;margin:14px 0;font-family:var(--font-mono);font-size:13px;line-height:1.9;color:var(--text-dim);white-space:pre;overflow-x:auto}
.er-diagram .er-table{color:var(--cyan);font-weight:700}
.er-diagram .er-rel{color:var(--text-muted)}
.er-diagram .er-note{color:var(--purple);font-style:italic}

/* SQL Block */
.sql-block{background:var(--bg-raised);border:1px solid var(--border);border-radius:10px;padding:18px 20px;margin:14px 0;overflow-x:auto;font-family:var(--font-mono);font-size:12px;line-height:1.7;color:var(--text-dim);white-space:pre}
.sql-block .sql-kw{color:var(--purple);font-weight:600}
.sql-block .sql-fn{color:var(--cyan)}
.sql-block .sql-str{color:var(--green)}
.sql-block .sql-cm{color:var(--text-muted);font-style:italic}
.sql-block .sql-type{color:var(--amber)}
.sql-block .sql-tbl{color:var(--cyan);font-weight:600}

/* Wireframe */
.wireframe{background:var(--bg-raised);border:1px solid var(--border);border-radius:12px;padding:20px 24px;margin:14px 0;font-family:var(--font-mono);font-size:11px;line-height:1.5;color:var(--text-dim);white-space:pre;overflow-x:auto}
.wire-label{font-size:12px;font-weight:700;color:var(--cyan);margin-bottom:8px;font-family:var(--font-sans)}

/* Flow Diagram */
.flow-diagram{background:var(--bg-raised);border:1px solid var(--border);border-radius:12px;padding:24px;margin:18px 0;font-family:var(--font-mono);font-size:12px;line-height:1.7;color:var(--text-dim);white-space:pre;overflow-x:auto}
.flow-label{font-size:13px;font-weight:700;color:var(--text);margin-bottom:4px;font-family:var(--font-sans)}
.flow-step{color:var(--cyan)}
.flow-arrow{color:var(--text-muted)}
.flow-service{color:var(--green)}
.flow-note{color:var(--purple);font-style:italic}

/* Phase Card */
.phase-card{background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;padding:22px;margin-bottom:12px;box-shadow:var(--shadow-sm)}
.phase-card h3{font-size:17px;font-weight:700;margin-bottom:6px}
.phase-policy{font-size:13px;color:var(--cyan);font-weight:600;margin-bottom:8px;padding:5px 12px;background:rgba(34,211,238,.04);border-radius:6px;display:inline-block}
.phase-card>p{font-size:13px;color:var(--text-dim);margin-bottom:12px;line-height:1.8}
.phase-items{display:flex;flex-direction:column;gap:4px}
.phase-item{font-size:12px;color:var(--text-dim);padding:5px 10px;background:var(--bg-raised);border-radius:5px;border:1px solid var(--border);display:flex;align-items:flex-start;gap:7px;line-height:1.5}
.pi-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0;margin-top:5px}
.pi-dot.g{background:var(--green)}
.pi-dot.c{background:var(--cyan)}
.pi-dot.b{background:var(--blue)}
.pi-dot.p{background:var(--purple)}
.pi-dot.r{background:var(--red)}
.pi-dot.a{background:var(--amber)}

/* Prompt Layer */
.prompt-layer{background:var(--bg-surface);border:1px solid var(--border);border-radius:10px;padding:16px 20px;margin:8px 0;box-shadow:var(--shadow-sm);position:relative;border-left:4px solid}
.prompt-layer.l1{border-left-color:var(--blue)}
.prompt-layer.l2{border-left-color:var(--cyan)}
.prompt-layer.l3{border-left-color:var(--green)}
.prompt-layer.l4{border-left-color:var(--amber)}
.prompt-layer.l5{border-left-color:var(--purple)}
.prompt-layer.l6{border-left-color:var(--pink)}
.prompt-layer h4{font-size:14px;font-weight:700;margin-bottom:4px}
.prompt-layer p{font-size:13px;color:var(--text-dim);line-height:1.7}
.prompt-tag{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;display:inline-block;padding:2px 8px;border-radius:3px;margin-bottom:6px}

/* Directory Tree */
.dir-tree{background:var(--bg-raised);border:1px solid var(--border);border-radius:10px;padding:20px 24px;margin:14px 0;font-family:var(--font-mono);font-size:12px;line-height:1.6;color:var(--text-dim);white-space:pre;overflow-x:auto}
.dir-tree .dir-folder{color:var(--cyan);font-weight:600}
.dir-tree .dir-file{color:var(--text-dim)}
.dir-tree .dir-comment{color:var(--text-muted);font-style:italic}

/* Accordion */
details.acc{margin-bottom:6px}
details.acc summary{cursor:pointer;display:flex;align-items:center;gap:10px;padding:12px 16px;background:var(--bg-surface);border:1px solid var(--border);border-radius:8px;font-size:14px;font-weight:600;color:var(--text);list-style:none;transition:all .15s}
details.acc summary::-webkit-details-marker{display:none}
details.acc summary::before{content:'\25B6';font-size:9px;color:var(--text-muted);transition:transform .2s}
details.acc[open] summary::before{transform:rotate(90deg)}
details.acc[open] summary{border-color:var(--border-focus);background:var(--bg-raised);border-radius:8px 8px 0 0}
.acc-body{padding:16px 20px;background:var(--bg-surface);border:1px solid var(--border);border-top:none;border-radius:0 0 8px 8px;font-size:13px;line-height:1.8;color:var(--text-dim)}
.acc-body h5{font-size:12px;font-weight:700;color:var(--cyan);margin:12px 0 4px;letter-spacing:1px;text-transform:uppercase}
.acc-body h5:first-child{margin-top:0}
.acc-body ul{padding-left:18px;margin:4px 0}
.acc-body li{margin-bottom:3px}

/* Issue Cards */
.issue-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:20px 0}
@media(max-width:700px){.issue-grid{grid-template-columns:1fr}}
.issue-card{background:var(--bg-surface);border:1px solid var(--border);border-radius:12px;padding:22px;border-left:4px solid;box-shadow:var(--shadow-sm)}
.issue-card.critical{border-left-color:var(--red)}
.issue-card.high{border-left-color:var(--amber)}
.issue-card.medium{border-left-color:var(--blue)}
.issue-card.low{border-left-color:var(--green)}
.issue-severity{font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:2px 8px;border-radius:3px;display:inline-block;margin-bottom:8px}
.issue-card.critical .issue-severity{background:rgba(239,68,68,.12);color:var(--red)}
.issue-card.high .issue-severity{background:rgba(245,158,11,.12);color:var(--amber)}
.issue-card.medium .issue-severity{background:rgba(74,125,255,.12);color:var(--blue)}
.issue-card.low .issue-severity{background:rgba(52,211,153,.12);color:var(--green)}
.issue-card h4{font-size:16px;font-weight:700;margin-bottom:6px}
.issue-card p{font-size:14px;color:var(--text-dim);line-height:1.8}

/* Color Swatch */
.swatch-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin:18px 0}
.swatch{border-radius:10px;overflow:hidden;border:1px solid var(--border);box-shadow:var(--shadow-sm)}
.swatch-color{height:48px}
.swatch-info{padding:8px 10px;background:var(--bg-surface);font-size:11px}
.swatch-name{font-weight:700;color:var(--text);display:block;margin-bottom:2px}
.swatch-hex{font-family:var(--font-mono);color:var(--text-muted)}

/* Footer */
.footer{text-align:center;padding:40px 0 28px;color:var(--text-muted);font-size:13px;border-top:1px solid var(--border);margin-top:40px}
.footer a{color:var(--blue);text-decoration:none}
</style>
</head>
<body>
<div class="container">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="hero">
  <div class="hero-badge">Technical Specification v1.0</div>
  <h1>æ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒ</h1>
  <p class="hero-sub">SvelteKit + Capacitor + Supabase + Claude API<br>MVPã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆLayer 1, Week 1-4ï¼‰ã®å®Œå…¨æŠ€è¡“ä»•æ§˜</p>
  <div class="hero-meta">
    <span>omoshiku Inc.</span>
    <span>|</span>
    <span>2026-02-27</span>
    <span>|</span>
    <span>10ãƒ†ãƒ¼ãƒ–ãƒ« / 6 Edge Functions / 5ç”»é¢</span>
    <span>|</span>
    <span><a href="sainou-coach-proposal.html" style="color:var(--cyan);text-decoration:none">&larr; ä¼ç”»æ›¸</a></span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LAYOUT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page-layout">

<!-- TOC SIDEBAR -->
<nav class="toc-sidebar">
  <h3>Contents</h3>
  <div class="toc-part">Architecture</div>
  <a href="#s01"><span class="toc-num">01</span> System Architecture</a>
  <a href="#s02"><span class="toc-num">02</span> DB Schema</a>
  <a href="#s03"><span class="toc-num">03</span> API Design</a>
  <div class="toc-part">Frontend</div>
  <a href="#s04"><span class="toc-num">04</span> UI/UX Wireframes</a>
  <div class="toc-part">AI Engine</div>
  <a href="#s05"><span class="toc-num">05</span> System Prompt Design</a>
  <a href="#s06"><span class="toc-num">06</span> Prompt Chaining</a>
  <div class="toc-part">Infrastructure</div>
  <a href="#s07"><span class="toc-num">07</span> Data Flow</a>
  <a href="#s08"><span class="toc-num">08</span> Project Structure</a>
  <a href="#s09"><span class="toc-num">09</span> Security Design</a>
  <div class="toc-part">Delivery</div>
  <a href="#s10"><span class="toc-num">10</span> MVP Sprint Plan</a>
  <div class="toc-part">Appendix</div>
  <a href="#appA"><span class="toc-num">A</span> Color Palette</a>
  <a href="#appB"><span class="toc-num">B</span> TypeScript Types</a>
</nav>

<!-- MAIN CONTENT -->
<div class="main-content">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PART: ARCHITECTURE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="part-divider"><span class="part-badge a">Architecture</span></div>

<!-- Section 01: System Architecture -->
<div class="section" id="s01">
  <div class="section-eyebrow" style="color:var(--cyan)">01 &mdash; System Architecture</div>
  <h2 class="action-title">å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>
  <p class="section-lead">SvelteKit SPAã‚’Capacitorã§ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ©ãƒƒãƒ—ã—ã€Supabaseã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã™ã‚‹3å±¤æ§‹æˆã€‚AI APIã¯Edge FunctionsçµŒç”±ã§å®‰å…¨ã«ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã€‚</p>

  <div class="kpi-grid" style="grid-template-columns:repeat(3,1fr)">
    <div class="kpi-card">
      <div class="kpi-num blue">3</div>
      <div class="kpi-label">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå½¢æ…‹<br><small style="color:var(--text-muted)">PWA / Android / iOS</small></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-num good">6</div>
      <div class="kpi-label">Edge Functions<br><small style="color:var(--text-muted)">AI / Calendar / Export</small></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-num vision">3</div>
      <div class="kpi-label">å¤–éƒ¨API<br><small style="color:var(--text-muted)">Claude / Gemini / GCal</small></div>
    </div>
  </div>

  <!-- Layer Stack -->
  <div class="layer-stack">
    <div class="layer">
      <span class="layer-badge l1">Layer 1 &mdash; Client</span>
      <h4>SvelteKit SPA + Capacitor</h4>
      <p>adapter-static ã§ãƒ“ãƒ«ãƒ‰ã—ãŸé™çš„SPAã‚’Capacitor WebViewã§ãƒ©ãƒƒãƒ—ã€‚Vercelã«ã‚‚åŒæ™‚ãƒ‡ãƒ—ãƒ­ã‚¤ã§PWAæä¾›ã€‚</p>
      <div class="tech-pills">
        <span class="tech-pill">SvelteKit 2.x</span>
        <span class="tech-pill">Svelte 5 Runes</span>
        <span class="tech-pill">TailwindCSS 4.x</span>
        <span class="tech-pill">TypeScript 5.x</span>
        <span class="tech-pill">Capacitor 6.x</span>
      </div>
    </div>
    <div class="layer">
      <span class="layer-badge l2">Layer 2 &mdash; Backend</span>
      <h4>Supabase (BaaS)</h4>
      <p>èªè¨¼ãƒ»DBãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ»Edge Functionsãƒ»Storageã‚’ä¸€ä½“æä¾›ã€‚APIã‚­ãƒ¼ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«éœ²å‡ºã•ã›ãšã«AI APIã‚’å‘¼ã³å‡ºã™ã€‚</p>
      <div class="tech-pills">
        <span class="tech-pill">Auth (Google OAuth)</span>
        <span class="tech-pill">PostgreSQL + pgvector</span>
        <span class="tech-pill">Realtime WebSocket</span>
        <span class="tech-pill">Edge Functions (Deno)</span>
        <span class="tech-pill">Storage</span>
      </div>
    </div>
    <div class="layer">
      <span class="layer-badge l3">Layer 3 &mdash; AI Engine</span>
      <h4>Claude API + Gemini Flash</h4>
      <p>ã‚³ãƒ¼ãƒãƒ³ã‚°å¯¾è©±ã¯Claude (Sonnet 20% / Haiku 60%)ã€‚ã‚¿ã‚¹ã‚¯åˆ†é¡ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ãƒ¼ã‚¹ã¯Gemini Flash (ç„¡æ–™)ã€‚ç·Šæ€¥RSDå¯¾å¿œã¯Sonnetå›ºå®šã€‚</p>
      <div class="tech-pills">
        <span class="tech-pill">Claude Sonnet 4.6</span>
        <span class="tech-pill">Claude Haiku 4.5</span>
        <span class="tech-pill">Gemini 2.0 Flash</span>
        <span class="tech-pill">pgvector (RAG)</span>
      </div>
    </div>
    <div class="layer">
      <span class="layer-badge l4">Layer 4 &mdash; External</span>
      <h4>Google Calendar API v3</h4>
      <p>OAuth 2.0 PKCEãƒ•ãƒ­ãƒ¼ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºã€‚Push Notification â†’ Edge Functions â†’ Realtime ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã€‚</p>
      <div class="tech-pills">
        <span class="tech-pill">Calendar API v3</span>
        <span class="tech-pill">OAuth 2.0 PKCE</span>
        <span class="tech-pill">Push Notifications</span>
        <span class="tech-pill">FreeBusy API</span>
      </div>
    </div>
  </div>

  <div class="note">
    <div class="note-label">Design Decision</div>
    <p><strong>SSRã¯ä¸ä½¿ç”¨</strong>ï¼ˆ<code>ssr = false</code>ï¼‰ã€‚Capacitor WebViewã§ã¯SSRéå¯¾å¿œã®ãŸã‚ã€å®Œå…¨SPAåŒ–ã€‚SEOä¸è¦ã®å€‹äººã‚¢ãƒ—ãƒªã«ã¯ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãªã—ã€‚</p>
  </div>
</div>

<!-- Section 02: DB Schema -->
<div class="section" id="s02">
  <div class="section-eyebrow" style="color:var(--cyan)">02 &mdash; DB Schema</div>
  <h2 class="action-title">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</h2>
  <p class="section-lead">Supabase PostgreSQLã«10ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«Row Level Security (RLS) ã‚’é©ç”¨ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚</p>

  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-num blue">10</div>
      <div class="kpi-label">ãƒ†ãƒ¼ãƒ–ãƒ«æ•°</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-num good">100%</div>
      <div class="kpi-label">RLSé©ç”¨ç‡</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-num vision">384</div>
      <div class="kpi-label">ãƒ™ã‚¯ãƒˆãƒ«æ¬¡å…ƒ<br><small style="color:var(--text-muted)">pgvector (RAG)</small></div>
    </div>
    <div class="kpi-card">
      <div class="kpi-num warn">8</div>
      <div class="kpi-label">ãƒãƒ©ãƒ³ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«<br><small style="color:var(--text-muted)">é ˜åŸŸã‚¹ã‚³ã‚¢</small></div>
    </div>
  </div>

  <!-- ER Diagram -->
  <h3 style="font-size:16px;font-weight:700;margin:20px 0 8px">ERå›³ï¼ˆæ¦‚è¦ï¼‰</h3>
  <div class="er-diagram"><span class="er-table">profiles</span> <span class="er-rel">â”€â”€â”€â”€â”€&lt;</span> <span class="er-table">daily_checkins</span>
  <span class="er-rel">â”‚</span>              <span class="er-rel">â”‚</span>
  <span class="er-rel">â”‚</span>              <span class="er-rel">â””â”€â”€â”€â”€&lt;</span> <span class="er-table">energy_logs</span>
  <span class="er-rel">â”‚</span>
  <span class="er-rel">â”œâ”€â”€â”€â”€&lt;</span> <span class="er-table">tasks</span> <span class="er-rel">â”€â”€â”€â”€â”€&lt;</span> <span class="er-table">task_completions</span>
  <span class="er-rel">â”‚</span>
  <span class="er-rel">â”œâ”€â”€â”€â”€&lt;</span> <span class="er-table">conversations</span> <span class="er-rel">â”€â”€â”€â”€â”€&lt;</span> <span class="er-table">messages</span>
  <span class="er-rel">â”‚</span>                               <span class="er-rel">â”‚</span>
  <span class="er-rel">â”‚</span>                               <span class="er-rel">â””â”€â”€â”€â”€&lt;</span> <span class="er-table">message_embeddings</span> <span class="er-note">(pgvector)</span>
  <span class="er-rel">â”‚</span>
  <span class="er-rel">â”œâ”€â”€â”€â”€&lt;</span> <span class="er-table">balance_scores</span> <span class="er-note">(8é ˜åŸŸãƒ¬ãƒ¼ãƒ€ãƒ¼)</span>
  <span class="er-rel">â”‚</span>
  <span class="er-rel">â”œâ”€â”€â”€â”€&lt;</span> <span class="er-table">calendar_events</span> <span class="er-note">(GCalã‚­ãƒ£ãƒƒã‚·ãƒ¥)</span>
  <span class="er-rel">â”‚</span>
  <span class="er-rel">â””â”€â”€â”€â”€&lt;</span> <span class="er-table">user_settings</span></div>

  <!-- Table Details -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 8px">ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©</h3>

  <details class="acc">
    <summary>profiles &mdash; ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆSupabase Authé€£æºï¼‰</summary>
    <div class="acc-body">
      <h5>ã‚«ãƒ©ãƒ å®šç¾©</h5>
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>åˆ¶ç´„</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">id</td><td><code>UUID</code></td><td>PK, FK â†’ auth.users</td><td>Supabase Auth ID</td></tr>
          <tr><td class="t-name">display_name</td><td><code>TEXT</code></td><td>NOT NULL</td><td>è¡¨ç¤ºå</td></tr>
          <tr><td class="t-name">avatar_url</td><td><code>TEXT</code></td><td>NULLABLE</td><td>ã‚¢ãƒã‚¿ãƒ¼ç”»åƒURL</td></tr>
          <tr><td class="t-name">timezone</td><td><code>TEXT</code></td><td>DEFAULT 'Asia/Tokyo'</td><td>ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</td></tr>
          <tr><td class="t-name">onboarding_completed</td><td><code>BOOLEAN</code></td><td>DEFAULT false</td><td>åˆæœŸè¨­å®šå®Œäº†ãƒ•ãƒ©ã‚°</td></tr>
          <tr><td class="t-name">myos_version</td><td><code>TEXT</code></td><td>DEFAULT '1.0'</td><td>MY OSãƒãƒ¼ã‚¸ãƒ§ãƒ³</td></tr>
          <tr><td class="t-name">created_at</td><td><code>TIMESTAMPTZ</code></td><td>DEFAULT now()</td><td>ä½œæˆæ—¥æ™‚</td></tr>
          <tr><td class="t-name">updated_at</td><td><code>TIMESTAMPTZ</code></td><td>DEFAULT now()</td><td>æ›´æ–°æ—¥æ™‚</td></tr>
        </tbody>
      </table>
      <h5>RLS Policy</h5>
      <ul>
        <li>SELECT: <code>auth.uid() = id</code></li>
        <li>UPDATE: <code>auth.uid() = id</code></li>
      </ul>
    </div>
  </details>

  <details class="acc">
    <summary>daily_checkins &mdash; æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿</summary>
    <div class="acc-body">
      <h5>ã‚«ãƒ©ãƒ å®šç¾©</h5>
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>åˆ¶ç´„</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">id</td><td><code>UUID</code></td><td>PK</td><td>è‡ªå‹•ç”Ÿæˆ</td></tr>
          <tr><td class="t-name">user_id</td><td><code>UUID</code></td><td>FK â†’ profiles, NOT NULL</td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</td></tr>
          <tr><td class="t-name">checkin_date</td><td><code>DATE</code></td><td>NOT NULL, UNIQUE(user_id)</td><td>ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥</td></tr>
          <tr><td class="t-name">energy_level</td><td><code>SMALLINT</code></td><td>CHECK 1-10</td><td>ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ«</td></tr>
          <tr><td class="t-name">mood</td><td><code>TEXT</code></td><td>NULLABLE</td><td>great / good / neutral / low / struggling</td></tr>
          <tr><td class="t-name">sleep_quality</td><td><code>SMALLINT</code></td><td>CHECK 1-5</td><td>ç¡çœ ã®è³ª</td></tr>
          <tr><td class="t-name">top_priorities</td><td><code>JSONB</code></td><td>DEFAULT '[]'</td><td>[{task_id, title, reason}]</td></tr>
          <tr><td class="t-name">ai_daily_plan</td><td><code>JSONB</code></td><td>NULLABLE</td><td>AIãŒç”Ÿæˆã—ãŸ1æ—¥ã®ãƒ—ãƒ©ãƒ³</td></tr>
          <tr><td class="t-name">reflection_notes</td><td><code>TEXT</code></td><td>NULLABLE</td><td>æ˜¨æ—¥ã®æŒ¯ã‚Šè¿”ã‚Š</td></tr>
        </tbody>
      </table>
      <h5>RLS Policy</h5>
      <ul><li>ALL: <code>auth.uid() = user_id</code></li></ul>
    </div>
  </details>

  <details class="acc">
    <summary>tasks &mdash; ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆ4ã‚¹ã‚¤ãƒƒãƒ + ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢ï¼‰</summary>
    <div class="acc-body">
      <h5>ã‚«ãƒ©ãƒ å®šç¾©ï¼ˆä¸»è¦ï¼‰</h5>
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">id / user_id / title / description</td><td colspan="2">æ¨™æº–ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</td></tr>
          <tr><td class="t-name">status</td><td><code>TEXT</code></td><td>pending / in_progress / completed / cancelled / deferred</td></tr>
          <tr><td class="t-name">switch_interest</td><td><code>SMALLINT 0-10</code></td><td>ğŸ”¥ èˆˆå‘³ãƒ»å¥½å¥‡å¿ƒã‚¹ã‚¤ãƒƒãƒ</td></tr>
          <tr><td class="t-name">switch_novelty</td><td><code>SMALLINT 0-10</code></td><td>ğŸŒŸ æ–°ã—ã•ã‚¹ã‚¤ãƒƒãƒ</td></tr>
          <tr><td class="t-name">switch_challenge</td><td><code>SMALLINT 0-10</code></td><td>âš¡ æŒ‘æˆ¦ã‚¹ã‚¤ãƒƒãƒ</td></tr>
          <tr><td class="t-name">switch_urgency</td><td><code>SMALLINT 0-10</code></td><td>â° ç·Šæ€¥åº¦ã‚¹ã‚¤ãƒƒãƒ</td></tr>
          <tr><td class="t-name">dopamine_score</td><td><code>NUMERIC(4,2)</code></td><td class="t-good">GENERATED: InterestÃ—0.3 + NoveltyÃ—0.25 + ChallengeÃ—0.25 + UrgencyÃ—0.2</td></tr>
          <tr><td class="t-name">dopamine_phase</td><td><code>TEXT</code></td><td>ignite / accelerate / sustain / switch / recover</td></tr>
          <tr><td class="t-name">scheduled_block</td><td><code>SMALLINT 1-4</code></td><td>ã‚¦ãƒ«ãƒˆãƒ©ãƒ‡ã‚£ã‚¢ãƒ³ãƒ–ãƒ­ãƒƒã‚¯ç•ªå·</td></tr>
          <tr><td class="t-name">source</td><td><code>TEXT</code></td><td>manual / calendar / ai_suggested</td></tr>
          <tr><td class="t-name">parent_task_id</td><td><code>UUID</code></td><td>ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®è¦ªï¼ˆè‡ªå·±å‚ç…§FKï¼‰</td></tr>
        </tbody>
      </table>
      <h5>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</h5>
      <ul>
        <li><code>idx_tasks_user_status</code> â€” (user_id, status)</li>
        <li><code>idx_tasks_user_date</code> â€” (user_id, due_date)</li>
        <li><code>idx_tasks_dopamine</code> â€” (user_id, dopamine_score DESC)</li>
      </ul>
      <h5>ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢ç®—å‡ºå¼</h5>
      <div class="code-block"><span class="cm">-- PostgreSQL GENERATED ALWAYS AS (STORED)</span>
<span class="kw">dopamine_score</span> = (<span class="fn">switch_interest</span> Ã— <span class="num">0.30</span>)
               + (<span class="fn">switch_novelty</span> Ã— <span class="num">0.25</span>)
               + (<span class="fn">switch_challenge</span> Ã— <span class="num">0.25</span>)
               + (<span class="fn">switch_urgency</span> Ã— <span class="num">0.20</span>)</div>
    </div>
  </details>

  <details class="acc">
    <summary>conversations / messages &mdash; AIå¯¾è©±ã‚»ãƒƒã‚·ãƒ§ãƒ³</summary>
    <div class="acc-body">
      <h5>conversations</h5>
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">type</td><td><code>TEXT</code></td><td>morning_checkin / focus_guide / midday_check / evening_review / quick_question / emergency / journal</td></tr>
          <tr><td class="t-name">ai_model</td><td><code>TEXT</code></td><td>ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«ï¼ˆclaude-haiku / claude-sonnet / gemini-flashï¼‰</td></tr>
          <tr><td class="t-name">token_count_input / output</td><td><code>INTEGER</code></td><td>ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ï¼ˆã‚³ã‚¹ãƒˆè¿½è·¡ï¼‰</td></tr>
          <tr><td class="t-name">summary</td><td><code>TEXT</code></td><td>AIç”Ÿæˆã®å¯¾è©±ã‚µãƒãƒªãƒ¼</td></tr>
        </tbody>
      </table>
      <h5>messages</h5>
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">conversation_id</td><td><code>UUID</code></td><td>FK â†’ conversations</td></tr>
          <tr><td class="t-name">role</td><td><code>TEXT</code></td><td>user / assistant / system</td></tr>
          <tr><td class="t-name">content</td><td><code>TEXT</code></td><td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡</td></tr>
          <tr><td class="t-name">metadata</td><td><code>JSONB</code></td><td>æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¿ã‚¹ã‚¯ææ¡ˆç­‰ï¼‰</td></tr>
        </tbody>
      </table>
      <h5>RLS</h5>
      <ul>
        <li>messages ã¯ conversations çµŒç”±ã§èªå¯: <code>EXISTS (SELECT 1 FROM conversations WHERE user_id = auth.uid())</code></li>
      </ul>
    </div>
  </details>

  <details class="acc">
    <summary>message_embeddings &mdash; RAGãƒ™ã‚¯ãƒˆãƒ« (pgvector)</summary>
    <div class="acc-body">
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">content_summary</td><td><code>TEXT</code></td><td>åŸ‹ã‚è¾¼ã¿å¯¾è±¡ãƒ†ã‚­ã‚¹ãƒˆ</td></tr>
          <tr><td class="t-name">embedding</td><td><code>vector(384)</code></td><td>all-MiniLM-L6-v2 (384æ¬¡å…ƒ)</td></tr>
        </tbody>
      </table>
      <h5>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</h5>
      <ul><li><code>ivfflat (embedding vector_cosine_ops)</code> â€” lists = 100</li></ul>
    </div>
  </details>

  <details class="acc">
    <summary>balance_scores &mdash; ãƒãƒ©ãƒ³ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ï¼ˆ8é ˜åŸŸã‚¹ã‚³ã‚¢ï¼‰</summary>
    <div class="acc-body">
      <table class="tbl">
        <thead><tr><th>ã‚«ãƒ©ãƒ </th><th>å‹</th><th>èª¬æ˜</th></tr></thead>
        <tbody>
          <tr><td class="t-name">period</td><td><code>TEXT</code></td><td>daily / weekly / monthly</td></tr>
          <tr><td class="t-name">adhd_brain</td><td><code>SMALLINT 1-10</code></td><td>ADHDè„³ç®¡ç†</td></tr>
          <tr><td class="t-name">bio_foundation</td><td><code>SMALLINT 1-10</code></td><td>ç”Ÿä½“åŸºç›¤ï¼ˆç¡çœ ãƒ»é‹å‹•ï¼‰</td></tr>
          <tr><td class="t-name">ai_driven</td><td><code>SMALLINT 1-10</code></td><td>AIæ´»ç”¨åº¦</td></tr>
          <tr><td class="t-name">aesthetics</td><td><code>SMALLINT 1-10</code></td><td>ç¾æ„è­˜</td></tr>
          <tr><td class="t-name">interpersonal</td><td><code>SMALLINT 1-10</code></td><td>å¯¾äººé–¢ä¿‚</td></tr>
          <tr><td class="t-name">family</td><td><code>SMALLINT 1-10</code></td><td>å®¶æ—</td></tr>
          <tr><td class="t-name">vision</td><td><code>SMALLINT 1-10</code></td><td>ãƒ“ã‚¸ãƒ§ãƒ³ãƒ»äº‹æ¥­</td></tr>
          <tr><td class="t-name">philosophy</td><td><code>SMALLINT 1-10</code></td><td>å“²å­¦ãƒ»ä¾¡å€¤è¦³</td></tr>
          <tr><td class="t-name">ai_insights</td><td><code>TEXT</code></td><td>AIã«ã‚ˆã‚‹ãƒãƒ©ãƒ³ã‚¹åˆ†æ</td></tr>
        </tbody>
      </table>
    </div>
  </details>

  <details class="acc">
    <summary>calendar_events / energy_logs / user_settings</summary>
    <div class="acc-body">
      <h5>calendar_eventsï¼ˆGCalã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰</h5>
      <ul>
        <li><strong>google_event_id</strong> (TEXT UNIQUE) â€” Google Calendar ã‚¤ãƒ™ãƒ³ãƒˆID</li>
        <li><strong>summary / start_time / end_time / location</strong> â€” ã‚¤ãƒ™ãƒ³ãƒˆåŸºæœ¬æƒ…å ±</li>
        <li><strong>synced_at</strong> â€” æœ€çµ‚åŒæœŸæ—¥æ™‚</li>
      </ul>
      <h5>energy_logsï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼è¿½è·¡ï¼‰</h5>
      <ul>
        <li><strong>energy_level</strong> (SMALLINT 1-10) â€” ã‚¨ãƒãƒ«ã‚®ãƒ¼å€¤</li>
        <li><strong>context</strong> â€” morning_checkin / midday_check / manual / focus_end</li>
        <li>UNIQUE(user_id, logged_at) â€” åŒä¸€æ™‚åˆ»ã®é‡è¤‡é˜²æ­¢</li>
      </ul>
      <h5>user_settingsï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼‰</h5>
      <ul>
        <li><strong>é€šçŸ¥</strong>: morning_checkin_time (07:00), midday_check_time (12:00), evening_review_time (18:00)</li>
        <li><strong>AIã‚³ãƒ¼ãƒ</strong>: coach_persona (coach / challenger / analyst), voice_input_enabled</li>
        <li><strong>ã‚¦ãƒ«ãƒˆãƒ©ãƒ‡ã‚£ã‚¢ãƒ³</strong>: block1-4_start, block_duration_minutes (DEFAULT 90)</li>
        <li><strong>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</strong>: google_calendar_id, google_refresh_token (æš—å·åŒ–æ¨å¥¨)</li>
      </ul>
    </div>
  </details>
</div>

<!-- Section 03: API Design -->
<div class="section" id="s03">
  <div class="section-eyebrow" style="color:var(--cyan)">03 &mdash; API Design</div>
  <h2 class="action-title">APIãƒ»ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ</h2>
  <p class="section-lead">å…¨ã¦ã®AI APIå‘¼ã³å‡ºã—ã¯Supabase Edge FunctionsçµŒç”±ã€‚APIã‚­ãƒ¼ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«éœ²å‡ºã•ã›ãªã„ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯RLSé©ç”¨ã®Supabaseç›´æ¥æ“ä½œã¨Edge Functionså‘¼ã³å‡ºã—ã®2ç³»çµ±ã€‚</p>

  <!-- Edge Functions Overview -->
  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">Edge Functions ä¸€è¦§</h3>
  <table class="tbl">
    <thead><tr><th>Function</th><th>ç”¨é€”</th><th>å¤–éƒ¨API</th><th>ãƒˆãƒªã‚¬ãƒ¼</th></tr></thead>
    <tbody>
      <tr><td class="t-name">ai-chat</td><td>Claude API ãƒ—ãƒ­ã‚­ã‚·ï¼ˆãƒ¡ã‚¤ãƒ³AIå¯¾è©±ï¼‰</td><td class="t-cyan">Claude Sonnet / Haiku</td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ£ãƒƒãƒˆ</td></tr>
      <tr><td class="t-name">ai-classify</td><td>ã‚¿ã‚¹ã‚¯4ã‚¹ã‚¤ãƒƒãƒè‡ªå‹•åˆ†é¡</td><td class="t-good">Gemini Flash</td><td>ã‚¿ã‚¹ã‚¯ä½œæˆæ™‚</td></tr>
      <tr><td class="t-name">calendar-sync</td><td>Google Calendar åŒæœŸãƒ»ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ</td><td class="t-blue">Calendar API v3</td><td>æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ / æ‰‹å‹•</td></tr>
      <tr><td class="t-name">calendar-webhook</td><td>Google Push Notification å—ä¿¡</td><td class="t-blue">Calendar API v3</td><td>Google Webhook</td></tr>
      <tr><td class="t-name">daily-export</td><td>æ—¥æ¬¡ãƒ­ã‚° â†’ Google Drive Markdown</td><td class="t-blue">Drive API</td><td>Cron (æ¯æ—¥ 23:00)</td></tr>
      <tr><td class="t-name">generate-embedding</td><td>ãƒ†ã‚­ã‚¹ãƒˆ â†’ ãƒ™ã‚¯ãƒˆãƒ«å¤‰æ›</td><td class="t-good">all-MiniLM-L6-v2</td><td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜å¾Œ</td></tr>
    </tbody>
  </table>

  <!-- ai-chat Detail -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ai-chat â€” ãƒ¡ã‚¤ãƒ³AIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h3>

  <div class="card-grid">
    <div class="card">
      <div class="card-badge cyan">Request</div>
      <h4>POST /functions/v1/ai-chat</h4>
      <div class="code-block"><span class="tp">AIChatRequest</span> {
  <span class="fn">conversation_id</span>?: <span class="tp">string</span>   <span class="cm">// æ—¢å­˜å¯¾è©±ã®ç¶šã</span>
  <span class="fn">type</span>: <span class="str">'morning_checkin'</span> | <span class="str">'focus_guide'</span>
      | <span class="str">'midday_check'</span> | <span class="str">'evening_review'</span>
      | <span class="str">'quick_question'</span> | <span class="str">'emergency'</span>
      | <span class="str">'journal'</span>
  <span class="fn">message</span>: <span class="tp">string</span>
  <span class="fn">context</span>?: {
    <span class="fn">energy_level</span>?: <span class="tp">number</span>
    <span class="fn">current_tasks</span>?: <span class="tp">Task[]</span>
    <span class="fn">calendar_events</span>?: <span class="tp">CalendarEvent[]</span>
  }
}</div>
    </div>
    <div class="card">
      <div class="card-badge green">Response</div>
      <h4>AIChatResponse</h4>
      <div class="code-block"><span class="tp">AIChatResponse</span> {
  <span class="fn">conversation_id</span>: <span class="tp">string</span>
  <span class="fn">reply</span>: <span class="tp">string</span>
  <span class="fn">structured_data</span>?: {
    <span class="fn">suggested_tasks</span>?: <span class="tp">Task[]</span>
    <span class="fn">daily_plan</span>?: <span class="tp">DailyPlan</span>
    <span class="fn">energy_assessment</span>?: <span class="tp">string</span>
    <span class="fn">action_items</span>?: <span class="tp">string[]</span>
  }
  <span class="fn">model_used</span>: <span class="tp">string</span>
}</div>
    </div>
  </div>

  <!-- AI Model Routing -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">AIãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯</h3>
  <div class="arch-hub">
    <div style="font-size:11px;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);margin-bottom:8px">Model Routing</div>
    <div class="hub-tier">
      <div class="hub-node migrate">emergency / RSD<span class="node-sub">æœ€é«˜å“è³ªã§å¯¾å¿œ</span></div>
      <div class="hub-node migrate">morning_checkin<span class="node-sub">1æ—¥ã®ãƒ—ãƒ©ãƒ³ç”Ÿæˆ</span></div>
      <div class="hub-node migrate">evening_review<span class="node-sub">æŒ¯ã‚Šè¿”ã‚Šå¯¾è©±</span></div>
    </div>
    <div class="hub-connector">â†“</div>
    <div class="hub-core">
      <div class="hub-core-name">Claude Sonnet 4.6</div>
      <div class="hub-core-sub">æ·±ã„å¯¾è©±ãƒ»å…±æ„Ÿãƒ»ãƒ—ãƒ©ãƒ³ç”Ÿæˆï¼ˆ20%ï¼‰</div>
    </div>
    <div class="hub-connector">&nbsp;</div>
    <div class="hub-tier">
      <div class="hub-node primary">focus_guide<span class="node-sub">ä»Šä½•ã«é›†ä¸­ï¼Ÿ</span></div>
      <div class="hub-node primary">quick_question<span class="node-sub">ã‚µã‚¯ãƒƒã¨ç›¸è«‡</span></div>
      <div class="hub-node primary">journal<span class="node-sub">ã‚¸ãƒ£ãƒ¼ãƒŠãƒªãƒ³ã‚°</span></div>
    </div>
    <div class="hub-connector">â†“</div>
    <div class="hub-core" style="border-color:rgba(52,211,153,.35);background:rgba(52,211,153,.06)">
      <div class="hub-core-name" style="color:var(--green)">Claude Haiku 4.5</div>
      <div class="hub-core-sub">é«˜é€Ÿå¿œç­”ãƒ»ã‚³ã‚¹ãƒˆæœ€é©ï¼ˆ60%ï¼‰</div>
    </div>
    <div class="hub-connector">&nbsp;</div>
    <div class="hub-tier">
      <div class="hub-node mcp">ã‚¿ã‚¹ã‚¯åˆ†é¡<span class="node-sub">4ã‚¹ã‚¤ãƒƒãƒè‡ªå‹•ã‚¿ã‚°</span></div>
      <div class="hub-node mcp">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ãƒ¼ã‚¹<span class="node-sub">ã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ åŒ–</span></div>
    </div>
    <div class="hub-connector">â†“</div>
    <div class="hub-core" style="border-color:rgba(74,125,255,.35);background:rgba(74,125,255,.06)">
      <div class="hub-core-name" style="color:var(--blue)">Gemini 2.0 Flash</div>
      <div class="hub-core-sub">ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆ20%ãƒ»ç„¡æ–™ï¼‰</div>
    </div>
  </div>

  <!-- Client API -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆAPIï¼ˆSupabaseç›´æ¥æ“ä½œï¼‰</h3>
  <div class="code-block"><span class="cm">// src/lib/api/index.ts â€” RLSé©ç”¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿æ“ä½œå¯èƒ½</span>

<span class="kw">export const</span> api = {
  <span class="fn">chat</span>: (req) =&gt;
    supabase.functions.invoke(<span class="str">'ai-chat'</span>, { body: req }),

  <span class="fn">classify</span>: (req) =&gt;
    supabase.functions.invoke(<span class="str">'ai-classify'</span>, { body: req }),

  <span class="fn">tasks</span>: {
    <span class="fn">list</span>: (date) =&gt;
      supabase.from(<span class="str">'tasks'</span>).select(<span class="str">'*'</span>)
        .eq(<span class="str">'due_date'</span>, date)
        .order(<span class="str">'dopamine_score'</span>, { ascending: <span class="num">false</span> }),
    <span class="fn">create</span>: (task) =&gt;
      supabase.from(<span class="str">'tasks'</span>).insert(task).select().single(),
    <span class="fn">complete</span>: (id) =&gt;
      supabase.from(<span class="str">'tasks'</span>).update({
        status: <span class="str">'completed'</span>,
        completed_at: <span class="kw">new</span> Date().toISOString()
      }).eq(<span class="str">'id'</span>, id),
  },

  <span class="fn">checkin</span>: {
    <span class="fn">today</span>: () =&gt;
      supabase.from(<span class="str">'daily_checkins'</span>).select(<span class="str">'*'</span>)
        .eq(<span class="str">'checkin_date'</span>, today()).maybeSingle(),
    <span class="fn">save</span>: (data) =&gt;
      supabase.from(<span class="str">'daily_checkins'</span>).upsert(data).select().single(),
  },

  <span class="fn">energy</span>: {
    <span class="fn">log</span>: (level, context, note) =&gt;
      supabase.from(<span class="str">'energy_logs'</span>).insert({ energy_level: level, context, note }),
    <span class="fn">todayLogs</span>: () =&gt;
      supabase.from(<span class="str">'energy_logs'</span>).select(<span class="str">'*'</span>)
        .gte(<span class="str">'logged_at'</span>, todayStart()).order(<span class="str">'logged_at'</span>),
  },
};</div>
</div>

<!-- Section 04: UI/UX Wireframes -->
<div class="section" id="s04">
  <div class="section-eyebrow" style="color:var(--green)">04 &mdash; UI/UX Wireframes</div>
  <h2 class="action-title">ç”»é¢è¨­è¨ˆï¼ˆMVP 5ç”»é¢ï¼‰</h2>
  <p class="section-lead">ADHD UXåŸå‰‡ã‚’å¾¹åº•é©ç”¨ã€‚èµ·å‹•â†’ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã€é¸æŠè‚¢ã¯æœ€å¤§3-4å€‹ã€ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢é™é †ã®ã‚¿ã‚¹ã‚¯è‡ªå‹•ã‚½ãƒ¼ãƒˆã€‚</p>

  <!-- Screen Map -->
  <table class="tbl">
    <thead><tr><th>#</th><th>ç”»é¢</th><th>ç”¨é€”</th><th>ãƒˆãƒªã‚¬ãƒ¼</th></tr></thead>
    <tbody>
      <tr><td class="mono">1</td><td class="t-name">ãƒ›ãƒ¼ãƒ  (Today)</td><td>ä»Šæ—¥ã®å…¨ä½“åƒã€ã€Œä»Šã“ã‚Œã«é›†ä¸­ã€ã‚«ãƒ¼ãƒ‰</td><td>ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚</td></tr>
      <tr><td class="mono">2</td><td class="t-name">æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</td><td>ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»æ°—åˆ†å…¥åŠ› â†’ AIå¯¾è©± â†’ 1æ—¥ãƒ—ãƒ©ãƒ³</td><td>æœã®é€šçŸ¥ã‚¿ãƒƒãƒ—</td></tr>
      <tr><td class="mono">3</td><td class="t-name">ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰</td><td>ã‚¿ã‚¹ã‚¯é›†ä¸­ã‚«ãƒ¼ãƒ‰ + ã‚¿ã‚¤ãƒãƒ¼</td><td>ã‚¿ã‚¹ã‚¯ã‚¿ãƒƒãƒ—</td></tr>
      <tr><td class="mono">4</td><td class="t-name">AIå¯¾è©±</td><td>ãƒ•ãƒªãƒ¼ãƒãƒ£ãƒƒãƒˆï¼ˆãƒ†ã‚­ã‚¹ãƒˆ / éŸ³å£°ï¼‰</td><td>ã€Œèã„ã¦ã¿ã‚‹ã€ãƒœã‚¿ãƒ³</td></tr>
      <tr><td class="mono">5</td><td class="t-name">è¨­å®š</td><td>é€šçŸ¥ã€ãƒ–ãƒ­ãƒƒã‚¯æ™‚é–“ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº</td><td>ã‚®ã‚¢ã‚¢ã‚¤ã‚³ãƒ³</td></tr>
    </tbody>
  </table>

  <!-- Screen Flow -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç”»é¢ãƒ•ãƒ­ãƒ¼</h3>
  <div class="flow-diagram"><span class="flow-step">[ã‚¢ãƒ—ãƒªèµ·å‹•]</span>
    <span class="flow-arrow">â”‚</span>
    <span class="flow-arrow">â”œâ”€â”€</span> ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æœªå®Œäº† <span class="flow-arrow">â†’</span> <span class="flow-step">[æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³]</span>
    <span class="flow-arrow">â”‚</span>                          <span class="flow-arrow">â”‚</span>
    <span class="flow-arrow">â”‚</span>                          <span class="flow-arrow">â””â”€â”€</span> å®Œäº† <span class="flow-arrow">â†’</span> <span class="flow-step">[ãƒ›ãƒ¼ãƒ  (Today)]</span>
    <span class="flow-arrow">â”‚</span>
    <span class="flow-arrow">â””â”€â”€</span> ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ¸ˆã¿ <span class="flow-arrow">â†’</span> <span class="flow-step">[ãƒ›ãƒ¼ãƒ  (Today)]</span>
                              <span class="flow-arrow">â”‚</span>
                              <span class="flow-arrow">â”œâ”€â”€</span> ã‚¿ã‚¹ã‚¯ã‚¿ãƒƒãƒ— <span class="flow-arrow">â†’</span> <span class="flow-step">[ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰]</span> <span class="flow-arrow">â†’</span> <span class="flow-step">[ãƒ›ãƒ¼ãƒ ]</span>
                              <span class="flow-arrow">â”œâ”€â”€</span> ã€Œèã„ã¦ã¿ã‚‹ã€ <span class="flow-arrow">â†’</span> <span class="flow-step">[AIå¯¾è©±]</span> <span class="flow-arrow">â†’</span> <span class="flow-step">[ãƒ›ãƒ¼ãƒ ]</span>
                              <span class="flow-arrow">â””â”€â”€</span> è¨­å®šã‚¢ã‚¤ã‚³ãƒ³ <span class="flow-arrow">â†’</span> <span class="flow-step">[è¨­å®š]</span></div>

  <!-- Wireframe 1: Home -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç”»é¢1: ãƒ›ãƒ¼ãƒ  (Today)</h3>
  <div class="wireframe">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒ          âš™ï¸   â”‚  â† ãƒ˜ãƒƒãƒ€ãƒ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚  â˜€ï¸ ãŠã¯ã‚ˆã†ã€å¤ªé›„               â”‚  â† æŒ¨æ‹¶ï¼ˆæ™‚é–“å¸¯ã§å¤‰åŒ–ï¼‰
â”‚  ã‚¨ãƒãƒ«ã‚®ãƒ¼: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 8/10     â”‚  â† ä»Šæ—¥ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼
â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
â”‚  â•‘  ğŸ¯ ä»Šã“ã‚Œã«é›†ä¸­            â•‘   â”‚  â† ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰
â”‚  â•‘                            â•‘   â”‚
â”‚  â•‘  ã‚­ãƒ£ãƒªã‚¹ãƒ”åºƒå‘Šåˆ†æ          â•‘   â”‚     ã‚¿ã‚¹ã‚¯å
â”‚  â•‘  ğŸ”¥ Interest 8  âš¡ Chall 7  â•‘   â”‚     4ã‚¹ã‚¤ãƒƒãƒãƒãƒƒã‚¸
â”‚  â•‘  â± æ®‹ã‚Š 47åˆ†               â•‘   â”‚     ã‚¿ã‚¤ãƒãƒ¼
â”‚  â•‘                            â•‘   â”‚
â”‚  â•‘  [ é›†ä¸­é–‹å§‹ ]              â•‘   â”‚     â† ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                  â”‚
â”‚  ğŸ“‹ ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ (3/7)           â”‚  â† ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢é™é †
â”‚  âœ… æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³               â”‚
â”‚  ğŸ”µ ã‚­ãƒ£ãƒªã‚¹ãƒ”åºƒå‘Šåˆ†æ  ğŸ”¥8      â”‚
â”‚  â¬œ ææ¡ˆè³‡æ–™ä½œæˆ       âš¡7       â”‚
â”‚  â¬œ è«‹æ±‚æ›¸å‡¦ç†         â°5       â”‚
â”‚                                  â”‚
â”‚  ğŸ“… æ¬¡ã®äºˆå®š                     â”‚
â”‚  14:00 - å¤§å’Œæ›¸æˆ¿ MTG (60min)    â”‚  â† ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº
â”‚                                  â”‚
â”‚  [   ğŸ’¬ èã„ã¦ã¿ã‚‹   ]          â”‚  â† AIãƒãƒ£ãƒƒãƒˆèµ·å‹•
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  ğŸ  Today  â”‚  ğŸ“Š Balance  â”‚  âš™ï¸  â”‚  â† BottomNav</div>

  <div class="insight">
    <div class="insight-label">ADHD UX Principles Applied</div>
    <p><strong>ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§é›†ä¸­é–‹å§‹</strong> â€” èµ·å‹•â†’ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ã®å°ç·šã‚’æœ€çŸ­åŒ–ã€‚ã‚¿ã‚¹ã‚¯ã¯<strong>ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢é™é †</strong>ã§è‡ªå‹•ã‚½ãƒ¼ãƒˆã€‚é¸æŠè‚¢ã¯ã€Œé›†ä¸­é–‹å§‹ã€ã€Œèã„ã¦ã¿ã‚‹ã€ã€Œã‚¿ã‚¹ã‚¯ã‚¿ãƒƒãƒ—ã€ã®<strong>3ã¤ã ã‘</strong>ã€‚</p>
  </div>

  <!-- Wireframe 2: Checkin -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç”»é¢2: æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</h3>
  <div class="wireframe">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† æˆ»ã‚‹    æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ… ãŠã¯ã‚ˆã†ã€å¤ªé›„ã€‚             â”‚
â”‚  ä»Šæ—¥ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’æ•™ãˆã¦ã­ã€‚  â”‚
â”‚                                  â”‚
â”‚  â”€â”€â”€ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ« â”€â”€â”€         â”‚
â”‚  ğŸ˜´ 1 2 3 4 5 6 7 8 9 10 ğŸ”¥     â”‚  â† ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
â”‚                                  â”‚
â”‚  â”€â”€â”€ ç¡çœ ã®è³ª â”€â”€â”€                â”‚
â”‚  ğŸ˜«  ğŸ˜•  ğŸ˜  ğŸ˜Š  ğŸ˜´              â”‚  â† 5æ®µéš
â”‚                                  â”‚
â”‚  â”€â”€â”€ ä»Šã®æ°—åˆ† â”€â”€â”€                â”‚
â”‚  [ çµ¶å¥½èª¿ ] [ ã¾ã‚ã¾ã‚ ]          â”‚  â† æœ€å¤§4æŠ
â”‚  [ ãµã¤ã† ] [ ã—ã‚“ã©ã„ ]          â”‚
â”‚                                  â”‚
â”‚  [      æ¬¡ã¸ â†’     ]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 2: AIå¯¾è©±                  â”‚
â”‚  ğŸ¤– ã‚¨ãƒãƒ«ã‚®ãƒ¼8ã€ç¡çœ ã‚‚ãƒãƒƒãƒãƒª  â”‚
â”‚     ã‚„ãªï¼ã“ã‚“ãªãƒ—ãƒ©ãƒ³ã©ã†ï¼Ÿ      â”‚
â”‚                                  â”‚
â”‚  Block 1 (08-09:30):             â”‚
â”‚   ğŸ”¥ ã‚­ãƒ£ãƒªã‚¹ãƒ”åºƒå‘Šåˆ†æ          â”‚
â”‚  Block 2 (10-11:30):             â”‚
â”‚   âš¡ ææ¡ˆè³‡æ–™ä½œæˆ                â”‚
â”‚                                  â”‚
â”‚  [ ã“ã®ãƒ—ãƒ©ãƒ³ã§1æ—¥ã‚’å§‹ã‚ã‚‹ï¼ ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

  <!-- Wireframe 3: Focus -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç”»é¢3: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰</h3>
  <div class="wireframe">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚          â± 47:23                â”‚  â† å¤§ããªã‚¿ã‚¤ãƒãƒ¼
â”‚       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘           â”‚  â† ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â”‚                                  â”‚
â”‚  ğŸ¯ ã‚­ãƒ£ãƒªã‚¹ãƒ”åºƒå‘Šåˆ†æ            â”‚
â”‚  ğŸ”¥ Interest 8  âš¡ Challenge 7   â”‚
â”‚  ğŸŒŸ Novelty 5   â° Urgency 6    â”‚
â”‚                                  â”‚
â”‚  ğŸ“ ãƒ¡ãƒ¢: "CTRæ¨ç§»ã‚’å…ˆã«..."     â”‚  â† ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ¢
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ â¸ ä¼‘æ†© â”‚  â”‚ âœ… å®Œäº† â”‚          â”‚  â† 2æŠã®ã¿
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                  â”‚
â”‚  [ ğŸ’¬ ãƒ–ãƒ­ãƒƒã‚«ãƒ¼ãŒã‚ã‚‹ ]          â”‚  â† AIç›¸è«‡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

  <!-- Wireframe 4: Chat -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç”»é¢4: AIå¯¾è©±</h3>
  <div class="wireframe">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† æˆ»ã‚‹    ğŸ’¬ AI Coach          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– ä½•ã§ã‚‚èã„ã¦ã‚„ã€‚            â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ åˆå¾Œã®MTGã®æº–å‚™ãŒå…¨ç„¶     â”‚    â”‚
â”‚  â”‚ ã§ãã¦ãªã„...              â”‚    â”‚  â† ãƒ¦ãƒ¼ã‚¶ãƒ¼
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚
â”‚  ğŸ¤–                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ã»ãªã€æ®‹ã‚Šæ™‚é–“ã‹ã‚‰é€†ç®—    â”‚    â”‚
â”‚  â”‚ ã—ã¦ã¿ã‚ˆã‹ã€‚              â”‚    â”‚
â”‚  â”‚                          â”‚    â”‚
â”‚  â”‚ æº–å‚™ã€åˆ†è§£ã—ã¦ã¿ã‚‹ã§:     â”‚    â”‚
â”‚  â”‚ 1. ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ç¢ºèª (5åˆ†)   â”‚    â”‚
â”‚  â”‚ 2. å‰å›è­°äº‹éŒ²ãƒã‚§ãƒƒã‚¯(10åˆ†)â”‚    â”‚
â”‚  â”‚ 3. ææ¡ˆãƒã‚¤ãƒ³ãƒˆæ•´ç†(20åˆ†) â”‚    â”‚
â”‚  â”‚                          â”‚    â”‚
â”‚  â”‚ å…¨éƒ¨ã§35åˆ†ã€‚ä½™è£•ã‚ã‚‹ã§ï¼  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚
â”‚  [ã‚¯ã‚¤ãƒƒã‚¯è¿”ä¿¡]                   â”‚
â”‚  [ ã¯ã„ã€1ã‹ã‚‰ ] [ 3ã‹ã‚‰ ]        â”‚  â† ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—è¿”ä¿¡
â”‚                                  â”‚
â”‚  [ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›...    ] [ğŸ¤] [ğŸ“¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
</div>

<!-- Section 05: System Prompt Design -->
<div class="section" id="s05">
  <div class="section-eyebrow" style="color:var(--purple)">05 &mdash; System Prompt Design</div>
  <h2 class="action-title">ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ</h2>
  <p class="section-lead">6ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€‚å›ºå®šãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆIdentity, Framework, Rules, Styleï¼‰+ å‹•çš„ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆContext, Historyï¼‰ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«æœ€é©åŒ–ã•ã‚ŒãŸAIã‚³ãƒ¼ãƒãƒ³ã‚°ã‚’å®Ÿç¾ã€‚</p>

  <div class="layer-stack">
    <div class="prompt-layer l1">
      <span class="prompt-tag" style="background:rgba(74,125,255,.15);color:var(--blue)">Layer 1 &mdash; Fixed</span>
      <h4>Core Identity</h4>
      <p>ã€Œæ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒã€ã®äººæ ¼å®šç¾©ã€‚ADHDè„³ã®ç‰¹æ€§ç†è§£ã€å¼·ã¿ã¨ã—ã¦æ­¦å™¨ã«å¤‰ãˆã‚‹è¦–ç‚¹ã€ã‚¬ãƒãƒ¼ã‚·ãƒ£é¢¨å£èª¿ã€‚ç·Šæ€¥æ™‚ï¼ˆRSDæ¤œçŸ¥ãƒ»ãƒ‘ãƒ‹ãƒƒã‚¯ï¼‰ã¯ç©ã‚„ã‹ãƒˆãƒ¼ãƒ³ã«è‡ªå‹•åˆ‡æ›¿ã€‚</p>
      <div class="code-block"><span class="cm">// ä½¿å‘½</span>
<span class="str">"æ¯æ—¥æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‡ºã—ã€äººç”Ÿã®8é ˜åŸŸã§ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæˆé•·ã™ã‚‹ã“ã¨"</span>
<span class="str">"ã€Œã‚„ã‚‹ã¹ãã€ã§ã¯ãªãã€Œã‚„ã‚ŠãŸã„ã€ã‚’å¼•ãå‡ºã™ã“ã¨"</span>
<span class="str">"ADHDã®ç‰¹æ€§ã‚’æ´»ã‹ã—ãŸæˆ¦ç•¥ã§ã€ä»–ã®äººã«ã¯ã§ããªã„æˆæœã‚’å‡ºã™ã“ã¨"</span></div>
    </div>

    <div class="prompt-layer l2">
      <span class="prompt-tag" style="background:rgba(34,211,238,.15);color:var(--cyan)">Layer 2 &mdash; Fixed</span>
      <h4>MY OS Framework</h4>
      <p>ãƒãƒ©ãƒ³ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ï¼ˆ8é ˜åŸŸï¼‰ã€4ã‚¹ã‚¤ãƒƒãƒãƒ»ã‚¿ã‚¹ã‚¯ã‚¿ã‚°ï¼ˆInterest / Novelty / Challenge / Urgencyï¼‰ã€ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³5æ®µéšãƒ«ãƒ¼ãƒ—ï¼ˆç‚¹ç«â†’åŠ é€Ÿâ†’ç¶­æŒâ†’åˆ‡æ›¿â†’å›å¾©ï¼‰ã®å®Œå…¨å®šç¾©ã€‚</p>
    </div>

    <div class="prompt-layer l3">
      <span class="prompt-tag" style="background:rgba(52,211,153,.15);color:var(--green)">Layer 3 &mdash; Fixed</span>
      <h4>Behavioral Rules</h4>
      <p>ADHD UX è¨­è¨ˆãƒ«ãƒ¼ãƒ«ã«åŸºã¥ãè¡Œå‹•åŸå‰‡ã€‚ã€Œç½ªæ‚ªæ„Ÿã‚’ä¸ãˆãªã„ã€ã€Œé¸æŠè‚¢ã¯æœ€å¤§3å€‹ã€ã€Œãƒã‚¤ã‚¯ãƒ­ã‚´ãƒ¼ãƒ«åˆ†å‰²ã€ã€ŒRSDæ¤œçŸ¥æ™‚ã®ç·Šæ€¥ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€ç­‰ã€‚</p>
    </div>

    <div class="prompt-layer l4">
      <span class="prompt-tag" style="background:rgba(245,158,11,.15);color:var(--amber)">Layer 4 &mdash; Fixed</span>
      <h4>Communication Style</h4>
      <p>ã‚¬ãƒãƒ¼ã‚·ãƒ£é¢¨é–¢è¥¿å¼ï¼ˆã€Œï½ã‚„ã§ã€ã€Œï½ã‚„ã‚ã€ã€Œï½ã—ã¦ã¿ãƒã€ï¼‰ã€‚ãŸã ã—RSDç·Šæ€¥æ™‚ã¯æ¨™æº–èªã®ç©ã‚„ã‹ãªãƒˆãƒ¼ãƒ³ã«åˆ‡æ›¿ã€‚çŸ­æ–‡ä¸­å¿ƒã€ç®‡æ¡æ›¸ãå¤šç”¨ã€‚</p>
    </div>

    <div class="prompt-layer l5">
      <span class="prompt-tag" style="background:rgba(167,139,250,.15);color:var(--purple)">Layer 5 &mdash; Dynamic</span>
      <h4>Dynamic Contextï¼ˆæ¯å›æ³¨å…¥ï¼‰</h4>
      <p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«è‡ªå‹•æ§‹ç¯‰ã•ã‚Œã‚‹å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€‚æ—¥æ™‚ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ«ã€æ°—åˆ†ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆï¼ˆ4ã‚¹ã‚¤ãƒƒãƒä»˜ãï¼‰ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¨ç§»ã€ãƒãƒ©ãƒ³ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«æœ€æ–°å€¤ã€RAGæ¤œç´¢çµæœã€‚</p>
      <div class="code-block"><span class="cm">// å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
<span class="str">## ç¾åœ¨ã®çŠ¶æ…‹</span>
- æ—¥æ™‚: <span class="fn">{YYYY-MM-DD HH:mm}</span> (<span class="fn">{æ›œæ—¥}</span>)
- ã‚¨ãƒãƒ«ã‚®ãƒ¼: <span class="fn">{1-10}</span>/10
- æ°—åˆ†: <span class="fn">{mood}</span>

<span class="str">## ä»Šæ—¥ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</span>
<span class="fn">{calendar_events_formatted}</span>

<span class="str">## ã‚¿ã‚¹ã‚¯ï¼ˆãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢é †ï¼‰</span>
<span class="fn">{tasks_with_4switch}</span>

<span class="str">## ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¨ç§»ï¼ˆç›´è¿‘3æ—¥ï¼‰</span>
<span class="fn">{energy_log_last_3days}</span>

<span class="str">## ãƒãƒ©ãƒ³ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«æœ€æ–°</span>
<span class="fn">{balance_scores_radar}</span>

<span class="str">## é–¢é€£ã™ã‚‹éå»ã®å¯¾è©±ï¼ˆRAG Top3ï¼‰</span>
<span class="fn">{rag_results_top3}</span></div>
    </div>

    <div class="prompt-layer l6">
      <span class="prompt-tag" style="background:rgba(244,114,182,.15);color:var(--pink)">Layer 6 &mdash; Dynamic</span>
      <h4>Conversation Historyï¼ˆFIFOï¼‰</h4>
      <p>ç›´è¿‘ã®å¯¾è©±å±¥æ­´ã‚’FIFOã§ç®¡ç†ã€‚ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«åã¾ã‚‹ã‚ˆã†å¤ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰é †ã«ãƒ‰ãƒ­ãƒƒãƒ—ã€‚é‡è¦ãªå¯¾è©±ã¯RAGï¼ˆpgvectorï¼‰ã§é•·æœŸè¨˜æ†¶ã¨ã—ã¦ä¿æŒã€‚</p>
    </div>
  </div>

  <div class="sowhat">
    <div class="sowhat-label">Why This Matters</div>
    <p>æ±ç”¨ChatGPTã¨ã®<strong>æ±ºå®šçš„ãªé•ã„</strong>: Layer 1-4ã®ã€Œå€‹äººOSã€å…¨æ–‡è„ˆãŒã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¸¸æ™‚çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®8é ˜åŸŸã®ä¾¡å€¤è¦³ã€ADHDã®ç‰¹æ€§ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¥½ã¿ã‚’<strong>ã™ã¹ã¦ç†è§£ã—ãŸä¸Šã§</strong>ã‚³ãƒ¼ãƒãƒ³ã‚°ã™ã‚‹ã€‚</p>
  </div>
</div>

<!-- Section 06: Prompt Chaining -->
<div class="part-divider"><span class="part-badge b">AI Engine</span></div>

<div class="section" id="s06">
  <div class="section-eyebrow" style="color:var(--purple)">06 &mdash; Prompt Chaining</div>
  <h2 class="action-title">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒã‚§ã‚¤ãƒ‹ãƒ³ã‚°å…¨ãƒ•ãƒ­ãƒ¼</h2>
  <p class="section-lead">3ã¤ã®ä¸»è¦ãƒã‚§ã‚¤ãƒ³: æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ï¼ˆ6ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¬ã‚¤ãƒ‰ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã€RSDç·Šæ€¥ä»‹å…¥ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã€‚ä¸¦åˆ—å‡¦ç†ã¨AIãƒ¢ãƒ‡ãƒ«åˆ‡æ›¿ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€é©ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®Ÿç¾ã€‚</p>

  <!-- Chain 1: Morning Checkin -->
  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">Chain 1: æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</h3>
  <div class="flow-diagram"><span class="flow-label">Morning Checkin Chain â€” 6 Steps</span>

<span class="flow-step">[Step 0]</span> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ç”»é¢ã‚’é–‹ã
    <span class="flow-arrow">â”‚</span>
    <span class="flow-arrow">â”œâ”€â”€</span> <span class="flow-note">[ä¸¦åˆ—]</span> <span class="flow-service">Gemini Flash</span>: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å–å¾— â†’ ã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ åŒ–
    <span class="flow-arrow">â”œâ”€â”€</span> <span class="flow-note">[ä¸¦åˆ—]</span> <span class="flow-service">Supabase</span>: æ˜¨æ—¥ã®ãƒ­ã‚°ãƒ»ã‚¿ã‚¹ã‚¯å®Œäº†çŠ¶æ³å–å¾—
    <span class="flow-arrow">â””â”€â”€</span> <span class="flow-note">[ä¸¦åˆ—]</span> <span class="flow-service">Supabase</span>: æœªå®Œäº†ã‚¿ã‚¹ã‚¯å–å¾—
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 1]</span> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»æ°—åˆ†ã‚’å…¥åŠ›
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 2]</span> <span class="flow-service">Gemini Flash</span>: ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã«4ã‚¹ã‚¤ãƒƒãƒè‡ªå‹•ã‚¿ã‚°ä»˜ã‘
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 3]</span> <span class="flow-service">Claude Sonnet</span>: å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ + 1æ—¥ãƒ—ãƒ©ãƒ³ç”Ÿæˆ
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">ã€Œãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³çµæœã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€ã‚¿ã‚¹ã‚¯ã‚’è¸ã¾ãˆã¦</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note"> ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³5æ®µéšãƒ«ãƒ¼ãƒ— Ã— ã‚¦ãƒ«ãƒˆãƒ©ãƒ‡ã‚£ã‚¢ãƒ³ãƒªã‚ºãƒ ã§é…ç½®ã€</span>
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 4]</span> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ©ãƒ³ã‚’ç¢ºèªãƒ»ä¿®æ­£ï¼ˆæœ€å¤§3å¾€å¾©ï¼‰
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 5]</span> ç¢ºå®š
    <span class="flow-arrow">â”œâ”€â”€</span> <span class="flow-service">Supabase</span>: daily_checkins ã«ä¿å­˜
    <span class="flow-arrow">â”œâ”€â”€</span> <span class="flow-service">Supabase</span>: tasks ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ›´æ–°
    <span class="flow-arrow">â””â”€â”€</span> <span class="flow-service">Supabase</span>: energy_logs ã«è¨˜éŒ²
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 6]</span> ãƒ›ãƒ¼ãƒ ç”»é¢ã«é·ç§» â†’ æœ€åˆã®ã‚¿ã‚¹ã‚¯ãŒã€Œä»Šã“ã‚Œã«é›†ä¸­ã€ã‚«ãƒ¼ãƒ‰ã«è¡¨ç¤º</div>

  <!-- Chain 2: Focus Guide -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">Chain 2: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¬ã‚¤ãƒ‰</h3>
  <div class="flow-diagram"><span class="flow-label">Focus Guide Chain â€” 2 Steps (Ultra-fast)</span>

<span class="flow-step">[Step 0]</span> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œä»Šä½•ã«é›†ä¸­ï¼Ÿã€ã‚’ã‚¿ãƒƒãƒ— or ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å¿œç­”
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 1]</span> <span class="flow-service">Claude Haiku</span>: ç¾åœ¨æ™‚åˆ» + ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ + ã‚¿ã‚¹ã‚¯ + ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è€ƒæ…®
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">ã€Œç¾åœ¨{HH:mm}ã€‚æ¬¡ã®äºˆå®šã¯{next_event}ã€‚</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note"> æ®‹ã‚Šã‚¿ã‚¹ã‚¯ã®ä¸­ã§ä»Šæœ€é©ãªã®ã¯ä½•ã‹ï¼Ÿç†ç”±ã‚’1æ–‡ã§ã€‚ã€</span>
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 2]</span> ã€Œä»Šã“ã‚Œã«é›†ä¸­ã€ã‚«ãƒ¼ãƒ‰æ›´æ–°
    <span class="flow-note">     æ‰€è¦æ™‚é–“: ~500msï¼ˆHaikué«˜é€Ÿå¿œç­”ï¼‰</span></div>

  <!-- Chain 3: RSD Emergency -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">Chain 3: RSDç·Šæ€¥ä»‹å…¥</h3>
  <div class="flow-diagram"><span class="flow-label">RSD Emergency Chain â€” 3 Steps</span>

<span class="flow-step">[Step 0]</span> ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰RSDãƒˆãƒªã‚¬ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œçŸ¥
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: "ã‚‚ã†ãƒ€ãƒ¡" "å«Œã‚ã‚ŒãŸ" "å¤±æ•—ã—ãŸ" "æœ€æ‚ª"</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">           "ç„¡ç†" "ã¤ã‚‰ã„" "æ€’ã‚‰ã‚ŒãŸ" "å¦å®šã•ã‚ŒãŸ"</span>
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 1]</span> <span class="flow-service">Claude Sonnet</span> (Emergency ãƒšãƒ«ã‚½ãƒŠ):
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">1. æ„Ÿæƒ…ã‚’å—ã‘æ­¢ã‚ã‚‹ï¼ˆå…±æ„Ÿã€ã‚¸ãƒ£ãƒƒã‚¸ã—ãªã„ï¼‰</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">2. å‘¼å¸æ³•ã‚’ææ¡ˆï¼ˆ4-7-8å‘¼å¸ï¼‰</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">3. äº‹å®Ÿã¨æ„Ÿæƒ…ã‚’åˆ†é›¢ã™ã‚‹è³ªå•</span>
    <span class="flow-arrow">â”‚</span>   <span class="flow-note">4. å…·ä½“çš„ãªæ¬¡ã®ãƒã‚¤ã‚¯ãƒ­ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’1ã¤ã ã‘ææ¡ˆ</span>
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 2]</span> ãƒ¦ãƒ¼ã‚¶ãƒ¼å¿œç­”ã‚’å¾…ã¤ï¼ˆå¼·åˆ¶ã—ãªã„ã€æ²ˆé»™ã‚‚OKï¼‰
    <span class="flow-arrow">â”‚</span>
<span class="flow-step">[Step 3]</span> çŠ¶æ³ã«å¿œã˜ã¦Coachãƒšãƒ«ã‚½ãƒŠã«æˆ»ã‚‹</div>

  <div class="note">
    <div class="note-label">Safety Design</div>
    <p>RSDæ¤œçŸ¥æ™‚ã¯<strong>å£èª¿ã‚’è‡ªå‹•åˆ‡æ›¿</strong>ï¼ˆé–¢è¥¿å¼â†’æ¨™æº–èªã®ç©ã‚„ã‹ãªãƒˆãƒ¼ãƒ³ï¼‰ã€‚ã€Œç½ªæ‚ªæ„Ÿã‚’ä¸ãˆãªã„ã€ã€Œä»Šã®ã‚ãªãŸã¯ååˆ†é ‘å¼µã£ã¦ã„ã‚‹ã€ã‚’åŸºæœ¬å§¿å‹¢ã¨ã—ã€<strong>è¡Œå‹•ã®æŠ¼ã—ä»˜ã‘ã¯ã—ãªã„</strong>ã€‚</p>
  </div>
</div>

<!-- Section 07: Data Flow -->
<div class="part-divider"><span class="part-badge c">Infrastructure</span></div>

<div class="section" id="s07">
  <div class="section-eyebrow" style="color:var(--blue)">07 &mdash; Data Flow</div>
  <h2 class="action-title">ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>
  <p class="section-lead">ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ Supabase â†’ AI APIï¼‰ã¨ã€Claude Code ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰ï¼ˆæ—¥æ¬¡ãƒ­ã‚° â†’ Google Drive â†’ Claude Codeï¼‰ã®2ç³»çµ±ã€‚</p>

  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h3>
  <div class="flow-diagram"><span class="flow-label">Main Data Flow</span>

<span class="flow-step">[ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ]</span>
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â–¼</span>
<span class="flow-step">[SvelteKit ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ]</span>
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â”œâ”€â”€â”€</span> Auth <span class="flow-arrow">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º</span> <span class="flow-service">[Supabase Auth (Google OAuth)]</span>
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â”œâ”€â”€â”€</span> CRUD <span class="flow-arrow">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º</span> <span class="flow-service">[Supabase PostgreSQL]</span>
     <span class="flow-arrow">â”‚</span>    (tasks, checkins,      <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â”‚</span>     energy, balance)      <span class="flow-arrow">â”œâ”€â”€</span> Realtime WS <span class="flow-arrow">â”€â”€â–º</span> ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ›´æ–°
     <span class="flow-arrow">â”‚</span>                           <span class="flow-arrow">â””â”€â”€</span> pgvector <span class="flow-arrow">â”€â”€â–º</span> RAGæ¤œç´¢çµæœ
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â”œâ”€â”€â”€</span> AI Chat <span class="flow-arrow">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º</span> <span class="flow-service">[Edge Function: ai-chat]</span>
     <span class="flow-arrow">â”‚</span>                           <span class="flow-arrow">â”œâ”€â”€</span> <span class="flow-service">Claude API</span> (Haiku/Sonnet)
     <span class="flow-arrow">â”‚</span>                           <span class="flow-arrow">â”‚</span>     â†‘ System Prompt + Dynamic Context
     <span class="flow-arrow">â”‚</span>                           <span class="flow-arrow">â””â”€â”€</span> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ â†’ PostgreSQL
     <span class="flow-arrow">â”‚</span>                                               <span class="flow-arrow">â””â”€â”€</span> éåŒæœŸ: embedding â†’ pgvector
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â”œâ”€â”€â”€</span> ã‚¿ã‚¹ã‚¯åˆ†é¡ <span class="flow-arrow">â”€â”€â”€â”€â”€â”€â”€â”€â–º</span> <span class="flow-service">[Edge Function: ai-classify]</span>
     <span class="flow-arrow">â”‚</span>                           <span class="flow-arrow">â””â”€â”€</span> <span class="flow-service">Gemini Flash</span>
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â””â”€â”€â”€</span> ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ <span class="flow-arrow">â”€â”€â”€â”€â”€â”€â”€â”€â–º</span> <span class="flow-service">[Edge Function: calendar-sync]</span>
                                 <span class="flow-arrow">â””â”€â”€</span> <span class="flow-service">Google Calendar API v3</span></div>

  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">Claude Code ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰</h3>
  <div class="flow-diagram"><span class="flow-label">Daily Log Export (Phase 1)</span>

<span class="flow-step">[æ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒ App]</span>
     <span class="flow-arrow">â”‚</span>
     <span class="flow-arrow">â””â”€â”€</span> æ—¥æ¬¡ãƒ­ã‚°è‡ªå‹•ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ <span class="flow-note">(Edge Function: daily-export, 23:00 Cron)</span>
            <span class="flow-arrow">â”‚</span>
            <span class="flow-arrow">â–¼</span>
     <span class="flow-service">[Google Drive]</span>  â”€â”€ myos-logs/YYYY-MM-DD.md
            <span class="flow-arrow">â”‚</span>
            <span class="flow-arrow">â–¼</span>
     <span class="flow-service">[Claude Code]</span>  â”€â”€ Drive MCP â”€â”€ ãƒ­ã‚°èª­ã¿å–ã‚Š</div>

  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">æ—¥æ¬¡ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼</h3>
  <div class="code-block"><span class="cm"># MY OS Daily Log â€” 2026-02-27</span>

<span class="str">## ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</span>
- ã‚¨ãƒãƒ«ã‚®ãƒ¼: <span class="num">8</span>/10
- æ°—åˆ†: great
- ç¡çœ : <span class="num">4</span>/5

<span class="str">## ã‚¿ã‚¹ã‚¯å®Œäº†</span>
- [x] ã‚­ãƒ£ãƒªã‚¹ãƒ”åºƒå‘Šåˆ†æ (<span class="fn">ğŸ”¥8 âš¡7</span>) â€” 85åˆ†
- [x] ææ¡ˆè³‡æ–™ä½œæˆ (<span class="fn">âš¡7 ğŸŒŸ6</span>) â€” 60åˆ†
- [ ] è«‹æ±‚æ›¸å‡¦ç† (<span class="fn">â°5</span>) â€” æœªç€æ‰‹

<span class="str">## ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¨ç§»</span>
08:00 â†’ <span class="num">8</span>, 12:00 â†’ <span class="num">6</span>, 15:00 â†’ <span class="num">5</span>, 18:00 â†’ <span class="num">7</span>

<span class="str">## AIå¯¾è©±ãƒã‚¤ãƒ©ã‚¤ãƒˆ</span>
- åˆå‰ä¸­ã«é›†ä¸­ç³»ã‚¿ã‚¹ã‚¯ã‚’å‰å€’ã—ã™ã‚‹æˆ¦ç•¥ãŒæˆåŠŸ
- MTGå‰ã«10åˆ†ã®æº–å‚™æ™‚é–“ã‚’è¨­ã‘ãŸã®ãŒåŠ¹æœçš„ã ã£ãŸ</div>
</div>

<!-- Section 08: Project Structure -->
<div class="section" id="s08">
  <div class="section-eyebrow" style="color:var(--blue)">08 &mdash; Project Structure</div>
  <h2 class="action-title">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</h2>
  <p class="section-lead">SvelteKitã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å¾“ã£ãŸæ§‹æˆã€‚lib/ ã«APIãƒ»ã‚¹ãƒˆã‚¢ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é›†ç´„ã€‚supabase/ ã«Edge Functions ã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚</p>

  <div class="dir-tree"><span class="dir-folder">myos-app/</span>
<span class="dir-file">â”œâ”€â”€ .env.local</span>                    <span class="dir-comment"># ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒå¤‰æ•°</span>
<span class="dir-file">â”œâ”€â”€ .env.example</span>                  <span class="dir-comment"># ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
<span class="dir-file">â”œâ”€â”€ capacitor.config.json</span>         <span class="dir-comment"># Capacitorè¨­å®š (webDir: "build")</span>
<span class="dir-file">â”œâ”€â”€ svelte.config.js</span>              <span class="dir-comment"># adapter-static, fallback: 'index.html'</span>
<span class="dir-file">â”œâ”€â”€ tailwind.config.js</span>
<span class="dir-file">â”œâ”€â”€ tsconfig.json</span>
<span class="dir-file">â”œâ”€â”€ package.json</span>
â”‚
<span class="dir-folder">â”œâ”€â”€ src/</span>
â”‚   <span class="dir-file">â”œâ”€â”€ app.html</span>                  <span class="dir-comment"># HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
â”‚   <span class="dir-file">â”œâ”€â”€ app.css</span>                   <span class="dir-comment"># Tailwind directives</span>
â”‚   â”‚
â”‚   <span class="dir-folder">â”œâ”€â”€ lib/</span>
â”‚   â”‚   <span class="dir-folder">â”œâ”€â”€ api/</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ index.ts</span>          <span class="dir-comment"># APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ supabase.ts</span>       <span class="dir-comment"># SupabaseåˆæœŸåŒ–</span>
â”‚   â”‚   â”‚   <span class="dir-file">â””â”€â”€ types.ts</span>          <span class="dir-comment"># Supabaseå‹å®šç¾©ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰</span>
â”‚   â”‚   â”‚
â”‚   â”‚   <span class="dir-folder">â”œâ”€â”€ stores/</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ auth.svelte.ts</span>    <span class="dir-comment"># èªè¨¼çŠ¶æ…‹ï¼ˆSvelte 5 runesï¼‰</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ tasks.svelte.ts</span>   <span class="dir-comment"># ã‚¿ã‚¹ã‚¯çŠ¶æ…‹</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ energy.svelte.ts</span>  <span class="dir-comment"># ã‚¨ãƒãƒ«ã‚®ãƒ¼çŠ¶æ…‹</span>
â”‚   â”‚   â”‚   <span class="dir-file">â””â”€â”€ chat.svelte.ts</span>    <span class="dir-comment"># ãƒãƒ£ãƒƒãƒˆçŠ¶æ…‹</span>
â”‚   â”‚   â”‚
â”‚   â”‚   <span class="dir-folder">â”œâ”€â”€ components/</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ FocusCard.svelte</span>       <span class="dir-comment"># ã€Œä»Šã“ã‚Œã«é›†ä¸­ã€ã‚«ãƒ¼ãƒ‰</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ TaskList.svelte</span>        <span class="dir-comment"># ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆï¼ˆãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³é †ï¼‰</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ EnergySlider.svelte</span>    <span class="dir-comment"># ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ ChatBubble.svelte</span>      <span class="dir-comment"># ãƒãƒ£ãƒƒãƒˆå¹ãå‡ºã—</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ ChatInput.svelte</span>       <span class="dir-comment"># ãƒ†ã‚­ã‚¹ãƒˆ+éŸ³å£°å…¥åŠ›</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ Timer.svelte</span>           <span class="dir-comment"># ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¿ã‚¤ãƒãƒ¼</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ CalendarPreview.svelte</span> <span class="dir-comment"># ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ SwitchBadges.svelte</span>    <span class="dir-comment"># 4ã‚¹ã‚¤ãƒƒãƒãƒãƒƒã‚¸è¡¨ç¤º</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ QuickReplies.svelte</span>    <span class="dir-comment"># ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—è¿”ä¿¡ãƒœã‚¿ãƒ³</span>
â”‚   â”‚   â”‚   <span class="dir-file">â””â”€â”€ BottomNav.svelte</span>       <span class="dir-comment"># ãƒœãƒˆãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</span>
â”‚   â”‚   â”‚
â”‚   â”‚   <span class="dir-folder">â”œâ”€â”€ prompts/</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ system.ts</span>              <span class="dir-comment"># ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆLayer 1-4ï¼‰</span>
â”‚   â”‚   â”‚   <span class="dir-file">â”œâ”€â”€ context-builder.ts</span>     <span class="dir-comment"># å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰ï¼ˆLayer 5ï¼‰</span>
â”‚   â”‚   â”‚   <span class="dir-folder">â””â”€â”€ chains/</span>
â”‚   â”‚   â”‚       <span class="dir-file">â”œâ”€â”€ morning-checkin.ts</span> <span class="dir-comment"># æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒã‚§ã‚¤ãƒ³</span>
â”‚   â”‚   â”‚       <span class="dir-file">â”œâ”€â”€ focus-guide.ts</span>     <span class="dir-comment"># ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¬ã‚¤ãƒ‰ãƒã‚§ã‚¤ãƒ³</span>
â”‚   â”‚   â”‚       <span class="dir-file">â””â”€â”€ emergency.ts</span>       <span class="dir-comment"># RSDç·Šæ€¥ä»‹å…¥ãƒã‚§ã‚¤ãƒ³</span>
â”‚   â”‚   â”‚
â”‚   â”‚   <span class="dir-folder">â””â”€â”€ utils/</span>
â”‚   â”‚       <span class="dir-file">â”œâ”€â”€ datetime.ts</span>            <span class="dir-comment"># æ—¥ä»˜ãƒ»æ™‚é–“ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</span>
â”‚   â”‚       <span class="dir-file">â”œâ”€â”€ dopamine.ts</span>            <span class="dir-comment"># ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã‚¹ã‚³ã‚¢è¨ˆç®—</span>
â”‚   â”‚       <span class="dir-file">â””â”€â”€ speech.ts</span>              <span class="dir-comment"># éŸ³å£°å…¥åŠ›ãƒ©ãƒƒãƒ‘ãƒ¼</span>
â”‚   â”‚
â”‚   <span class="dir-folder">â””â”€â”€ routes/</span>
â”‚       <span class="dir-file">â”œâ”€â”€ +layout.svelte</span>             <span class="dir-comment"># ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</span>
â”‚       <span class="dir-file">â”œâ”€â”€ +layout.ts</span>                 <span class="dir-comment"># ssr=false + Auth</span>
â”‚       <span class="dir-file">â”œâ”€â”€ +page.svelte</span>               <span class="dir-comment"># ãƒ›ãƒ¼ãƒ  (Today)</span>
â”‚       <span class="dir-folder">â”œâ”€â”€ checkin/</span>
â”‚       â”‚   <span class="dir-file">â””â”€â”€ +page.svelte</span>           <span class="dir-comment"># æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³</span>
â”‚       <span class="dir-folder">â”œâ”€â”€ focus/</span>
â”‚       â”‚   <span class="dir-file">â””â”€â”€ +page.svelte</span>           <span class="dir-comment"># ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰</span>
â”‚       <span class="dir-folder">â”œâ”€â”€ chat/</span>
â”‚       â”‚   <span class="dir-file">â””â”€â”€ +page.svelte</span>           <span class="dir-comment"># AIå¯¾è©±</span>
â”‚       <span class="dir-folder">â”œâ”€â”€ settings/</span>
â”‚       â”‚   <span class="dir-file">â””â”€â”€ +page.svelte</span>           <span class="dir-comment"># è¨­å®š</span>
â”‚       <span class="dir-folder">â””â”€â”€ auth/</span>
â”‚           <span class="dir-file">â”œâ”€â”€ login/+page.svelte</span>     <span class="dir-comment"># ãƒ­ã‚°ã‚¤ãƒ³</span>
â”‚           <span class="dir-file">â””â”€â”€ callback/+server.ts</span>    <span class="dir-comment"># OAuthã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯</span>
â”‚
<span class="dir-folder">â”œâ”€â”€ supabase/</span>
â”‚   <span class="dir-folder">â”œâ”€â”€ migrations/</span>
â”‚   â”‚   <span class="dir-file">â””â”€â”€ 001_initial_schema.sql</span>     <span class="dir-comment"># å…¨ãƒ†ãƒ¼ãƒ–ãƒ« + RLS</span>
â”‚   <span class="dir-folder">â””â”€â”€ functions/</span>
â”‚       <span class="dir-file">â”œâ”€â”€ ai-chat/index.ts</span>
â”‚       <span class="dir-file">â”œâ”€â”€ ai-classify/index.ts</span>
â”‚       <span class="dir-file">â”œâ”€â”€ calendar-sync/index.ts</span>
â”‚       <span class="dir-file">â”œâ”€â”€ calendar-webhook/index.ts</span>
â”‚       <span class="dir-file">â”œâ”€â”€ daily-export/index.ts</span>
â”‚       <span class="dir-file">â””â”€â”€ generate-embedding/index.ts</span>
â”‚
<span class="dir-folder">â”œâ”€â”€ android/</span>                           <span class="dir-comment"># Capacitor Android (è‡ªå‹•ç”Ÿæˆ)</span>
<span class="dir-folder">â”œâ”€â”€ ios/</span>                               <span class="dir-comment"># Capacitor iOS (è‡ªå‹•ç”Ÿæˆ)</span>
â”‚
<span class="dir-folder">â””â”€â”€ static/</span>
    <span class="dir-file">â”œâ”€â”€ favicon.png</span>
    <span class="dir-file">â””â”€â”€ manifest.json</span>                  <span class="dir-comment"># PWA ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ</span></div>
</div>

<!-- Section 09: Security Design -->
<div class="section" id="s09">
  <div class="section-eyebrow" style="color:var(--blue)">09 &mdash; Security Design</div>
  <h2 class="action-title">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ</h2>
  <p class="section-lead">èªè¨¼ã¯Supabase Auth (Google OAuth)ã€‚å…¨ãƒ†ãƒ¼ãƒ–ãƒ«RLSé©ç”¨ã€‚AI APIã‚­ãƒ¼ã¯Edge Functionså†…ã®ã¿ã€‚å°†æ¥çš„ã«ã‚¸ãƒ£ãƒ¼ãƒŠãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®E2Eæš—å·åŒ–ã‚’æ¤œè¨ã€‚</p>

  <!-- Auth Flow -->
  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">èªè¨¼ãƒ•ãƒ­ãƒ¼</h3>
  <div class="flow-diagram"><span class="flow-label">Authentication Flow</span>

<span class="flow-step">[ãƒ¦ãƒ¼ã‚¶ãƒ¼]</span> <span class="flow-arrow">â†’</span> <span class="flow-service">[Supabase Auth]</span> <span class="flow-arrow">â†’</span> <span class="flow-service">[Google OAuth 2.0]</span>
                                  <span class="flow-arrow">â†“</span>
                           access_token + refresh_token
                                  <span class="flow-arrow">â†“</span>
                           <span class="flow-service">[Supabase Session Cookie]</span>
                                  <span class="flow-arrow">â†“</span>
                           å…¨APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«è‡ªå‹•ä»˜ä¸</div>

  <!-- Threat Model -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">è„…å¨ãƒ¢ãƒ‡ãƒ« &amp; å¯¾ç­–</h3>
  <table class="tbl">
    <thead><tr><th>è„…å¨</th><th>å¯¾ç­–</th><th>å®Ÿè£…</th></tr></thead>
    <tbody>
      <tr><td class="t-name">APIã‚­ãƒ¼æ¼æ´©</td><td>Claude/Gemini APIã‚­ãƒ¼ã¯Edge Functionså†…ã®ã¿</td><td class="t-good">env secret</td></tr>
      <tr><td class="t-name">ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹</td><td>å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«Row Level Security (RLS)</td><td class="t-good">auth.uid() = user_id</td></tr>
      <tr><td class="t-name">XSS</td><td>Svelteã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆHTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ— + CSPè¨­å®š</td><td class="t-good">ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ¨™æº–</td></tr>
      <tr><td class="t-name">CSRF</td><td>SameSite Cookie + Supabaseè‡ªå‹•å¯¾ç­–</td><td class="t-good">è‡ªå‹•é©ç”¨</td></tr>
      <tr><td class="t-name">Google OAuthãƒˆãƒ¼ã‚¯ãƒ³ä¿ç®¡</td><td>refresh_tokenã¯Supabase DBï¼ˆæš—å·åŒ–ã‚«ãƒ©ãƒ æ¨å¥¨ï¼‰</td><td class="t-warn">Phase 2 ã§æš—å·åŒ–</td></tr>
      <tr><td class="t-name">ã‚¸ãƒ£ãƒ¼ãƒŠãƒªãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿</td><td>å°†æ¥çš„ã«E2Eæš—å·åŒ–ã‚’æ¤œè¨</td><td class="t-warn">Phase 3 ä»¥é™</td></tr>
    </tbody>
  </table>

  <!-- Environment Variables -->
  <h3 style="font-size:16px;font-weight:700;margin:24px 0 10px">ç’°å¢ƒå¤‰æ•°ç®¡ç†</h3>
  <div class="card-grid">
    <div class="card">
      <div class="card-badge green">Client (.env.local)</div>
      <h4>å…¬é–‹å¯èƒ½ãªå¤‰æ•°</h4>
      <div class="code-block"><span class="fn">PUBLIC_SUPABASE_URL</span>=<span class="str">https://xxx.supabase.co</span>
<span class="fn">PUBLIC_SUPABASE_ANON_KEY</span>=<span class="str">eyJhbGci...</span></div>
      <p>anon key ã¯RLSã§ä¿è­·ã•ã‚Œã‚‹ãŸã‚å…¬é–‹å¯èƒ½</p>
    </div>
    <div class="card">
      <div class="card-badge red">Edge Functions (Supabase Secrets)</div>
      <h4>ç§˜åŒ¿å¤‰æ•°</h4>
      <div class="code-block"><span class="fn">SUPABASE_SERVICE_ROLE_KEY</span>=<span class="str">eyJhbGci...</span>
<span class="fn">CLAUDE_API_KEY</span>=<span class="str">sk-ant-...</span>
<span class="fn">GEMINI_API_KEY</span>=<span class="str">AIza...</span>
<span class="fn">GOOGLE_CLIENT_ID</span>=<span class="str">xxx.apps.google...</span>
<span class="fn">GOOGLE_CLIENT_SECRET</span>=<span class="str">GOCSPX-...</span></div>
      <p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«çµ¶å¯¾ã«éœ²å‡ºã—ãªã„</p>
    </div>
  </div>
</div>

<!-- Section 10: MVP Sprint Plan -->
<div class="part-divider"><span class="part-badge d">Delivery</span></div>

<div class="section" id="s10">
  <div class="section-eyebrow" style="color:var(--amber)">10 &mdash; MVP Sprint Plan</div>
  <h2 class="action-title">MVPå®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆ20æ—¥é–“ï¼‰</h2>
  <p class="section-lead">4é€±é–“ã‚¹ãƒ—ãƒªãƒ³ãƒˆã§åŸºç›¤æ§‹ç¯‰â†’ã‚³ã‚¢æ©Ÿèƒ½â†’AIçµ±åˆâ†’ä»•ä¸Šã’ã€‚Week 1ã§ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚¢ãƒ—ãƒªã¨èªè¨¼ã€Week 4ã§PWA + Androidãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã€‚</p>

  <!-- Week 1 -->
  <div class="phase-card">
    <div class="phase-policy">Week 1: åŸºç›¤æ§‹ç¯‰</div>
    <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ– â†’ èªè¨¼ â†’ ã‚¿ã‚¹ã‚¯CRUD</h3>
    <div class="phase-items">
      <div class="phase-item"><span class="pi-dot g"></span><strong>Day 1</strong> â€” ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ï¼ˆSvelteKit + Tailwind + Capacitorï¼‰â†’ å‹•ä½œã™ã‚‹ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚¢ãƒ—ãƒª</div>
      <div class="phase-item"><span class="pi-dot g"></span><strong>Day 2</strong> â€” Supabaseè¨­å®šï¼ˆAuth + DB migration + RLSï¼‰â†’ DBç¨¼åƒã€Google OAuthå‹•ä½œ</div>
      <div class="phase-item"><span class="pi-dot c"></span><strong>Day 3</strong> â€” åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ + ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° + BottomNav â†’ 5ç”»é¢ã®ç©ºãƒšãƒ¼ã‚¸é·ç§»</div>
      <div class="phase-item"><span class="pi-dot c"></span><strong>Day 4</strong> â€” èªè¨¼ãƒ•ãƒ­ãƒ¼å®Œæˆï¼ˆãƒ­ã‚°ã‚¤ãƒ³ â†’ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ â†’ ãƒ›ãƒ¼ãƒ ï¼‰â†’ èªè¨¼æ¸ˆã¿ã‚¢ã‚¯ã‚»ã‚¹</div>
      <div class="phase-item"><span class="pi-dot b"></span><strong>Day 5</strong> â€” ã‚¿ã‚¹ã‚¯CRUDï¼ˆä½œæˆãƒ»ä¸€è¦§ãƒ»å®Œäº†ãƒ»å‰Šé™¤ï¼‰â†’ ã‚¿ã‚¹ã‚¯ç®¡ç†ã®åŸºæœ¬å‹•ä½œ</div>
    </div>
  </div>

  <!-- Week 2 -->
  <div class="phase-card">
    <div class="phase-policy">Week 2: ã‚³ã‚¢æ©Ÿèƒ½</div>
    <h3>AIå¯¾è©± â†’ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ â†’ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ â†’ ãƒ•ã‚©ãƒ¼ã‚«ã‚¹</h3>
    <div class="phase-items">
      <div class="phase-item"><span class="pi-dot b"></span><strong>Day 6</strong> â€” AI Chat Edge Function + ãƒãƒ£ãƒƒãƒˆUI â†’ AIã¨ã®ãƒ†ã‚­ã‚¹ãƒˆå¯¾è©±</div>
      <div class="phase-item"><span class="pi-dot b"></span><strong>Day 7</strong> â€” æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ç”»é¢ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼/æ°—åˆ†å…¥åŠ› + AIå¯¾è©±ï¼‰â†’ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼</div>
      <div class="phase-item"><span class="pi-dot p"></span><strong>Day 8</strong> â€” Google Calendaré€£æºï¼ˆOAuth + ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ï¼‰â†’ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º</div>
      <div class="phase-item"><span class="pi-dot p"></span><strong>Day 9</strong> â€” ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¿ã‚¤ãƒãƒ¼ + ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ï¼‰â†’ é›†ä¸­ãƒ¢ãƒ¼ãƒ‰UI</div>
      <div class="phase-item"><span class="pi-dot a"></span><strong>Day 10</strong> â€” 4ã‚¹ã‚¤ãƒƒãƒè‡ªå‹•åˆ†é¡ï¼ˆGemini Flashï¼‰â†’ ã‚¿ã‚¹ã‚¯ã«4ã‚¹ã‚¤ãƒƒãƒä»˜ä¸</div>
    </div>
  </div>

  <!-- Week 3 -->
  <div class="phase-card">
    <div class="phase-policy">Week 3: AIçµ±åˆ</div>
    <h3>ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ ãƒã‚§ã‚¤ãƒ³ â†’ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h3>
    <div class="phase-items">
      <div class="phase-item"><span class="pi-dot a"></span><strong>Day 11</strong> â€” ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè£… + å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ â†’ MY OSäººæ ¼ã®AIã‚³ãƒ¼ãƒ</div>
      <div class="phase-item"><span class="pi-dot a"></span><strong>Day 12</strong> â€” æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒã‚§ã‚¤ãƒ³å®Œæˆï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼+ã‚¿ã‚¹ã‚¯â†’AIâ†’ãƒ—ãƒ©ãƒ³ï¼‰â†’ 1æ—¥è¨­è¨ˆãƒ•ãƒ­ãƒ¼</div>
      <div class="phase-item"><span class="pi-dot r"></span><strong>Day 13</strong> â€” ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¬ã‚¤ãƒ‰ï¼ˆã€Œä»Šä½•ã«é›†ä¸­ï¼Ÿã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ææ¡ˆï¼‰â†’ ã‚¢ãƒ€ãƒ—ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰</div>
      <div class="phase-item"><span class="pi-dot r"></span><strong>Day 14</strong> â€” ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  â†’ ã‚¿ã‚¹ã‚¯è‡ªå‹•ã‚½ãƒ¼ãƒˆ</div>
      <div class="phase-item"><span class="pi-dot g"></span><strong>Day 15</strong> â€” ãƒ›ãƒ¼ãƒ ç”»é¢çµ±åˆï¼ˆFocusCard + TaskList + Calendarï¼‰â†’ ãƒ¡ã‚¤ãƒ³ç”»é¢å®Œæˆ</div>
    </div>
  </div>

  <!-- Week 4 -->
  <div class="phase-card">
    <div class="phase-policy">Week 4: ä»•ä¸Šã’</div>
    <h3>ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚° â†’ è¨­å®š â†’ ãƒ‡ãƒ—ãƒ­ã‚¤ â†’ MVPå®Œæˆ</h3>
    <div class="phase-items">
      <div class="phase-item"><span class="pi-dot g"></span><strong>Day 16</strong> â€” ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚° + æ¨ç§»è¡¨ç¤º â†’ ã‚¨ãƒãƒ«ã‚®ãƒ¼å¯è¦–åŒ–</div>
      <div class="phase-item"><span class="pi-dot c"></span><strong>Day 17</strong> â€” è¨­å®šç”»é¢ï¼ˆé€šçŸ¥æ™‚é–“ã€ãƒ–ãƒ­ãƒƒã‚¯è¨­å®šã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é¸æŠï¼‰â†’ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½</div>
      <div class="phase-item"><span class="pi-dot b"></span><strong>Day 18</strong> â€” PWAãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆVercelï¼‰+ å‹•ä½œç¢ºèª â†’ Webç‰ˆãƒªãƒªãƒ¼ã‚¹</div>
      <div class="phase-item"><span class="pi-dot p"></span><strong>Day 19</strong> â€” Android Capacitorãƒ“ãƒ«ãƒ‰ + å‹•ä½œç¢ºèª â†’ Androidç‰ˆå‹•ä½œ</div>
      <div class="phase-item"><span class="pi-dot r"></span><strong>Day 20</strong> â€” ãƒã‚°ä¿®æ­£ + UXèª¿æ•´ + æ—¥æ¬¡ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ â†’ <strong style="color:var(--green)">MVPå®Œæˆ</strong></div>
    </div>
  </div>

  <div class="insight">
    <div class="insight-label">Delivery Milestone</div>
    <p><strong>Day 20ã§MVPå®Œæˆ</strong>: PWA (Vercel) + Android (Capacitor) ã®2ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œã€‚æœãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ â†’ AI 1æ—¥ãƒ—ãƒ©ãƒ³ â†’ ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰ â†’ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚°ã®<strong>ã‚³ã‚¢ãƒ«ãƒ¼ãƒ—ãŒå®Œå…¨ã«å›ã‚‹çŠ¶æ…‹</strong>ã€‚</p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APPENDIX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="part-divider"><span class="part-badge e">Appendix</span></div>

<!-- Appendix A: Color Palette -->
<div class="section" id="appA">
  <div class="section-eyebrow" style="color:var(--amber)">Appendix A</div>
  <h2 class="action-title">ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ</h2>
  <p class="section-lead">McKinsey Dark ãƒ†ãƒ¼ãƒæº–æ‹ ã€‚4æ®µéšèƒŒæ™¯ + ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚«ãƒ©ãƒ¼ + 4ã‚¹ã‚¤ãƒƒãƒå°‚ç”¨ã‚«ãƒ©ãƒ¼ã€‚</p>

  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">èƒŒæ™¯4æ®µéš</h3>
  <div class="swatch-grid">
    <div class="swatch"><div class="swatch-color" style="background:#08080d"></div><div class="swatch-info"><span class="swatch-name">Deepest</span><span class="swatch-hex">#08080d</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#101018"></div><div class="swatch-info"><span class="swatch-name">Deep</span><span class="swatch-hex">#101018</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#181824"></div><div class="swatch-info"><span class="swatch-name">Card</span><span class="swatch-hex">#181824</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#222234"></div><div class="swatch-info"><span class="swatch-name">Elevated</span><span class="swatch-hex">#222234</span></div></div>
  </div>

  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚«ãƒ©ãƒ¼</h3>
  <div class="swatch-grid">
    <div class="swatch"><div class="swatch-color" style="background:#4a7dff"></div><div class="swatch-info"><span class="swatch-name">Blue (Accent)</span><span class="swatch-hex">#4a7dff</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#22d3ee"></div><div class="swatch-info"><span class="swatch-name">Cyan (Secondary)</span><span class="swatch-hex">#22d3ee</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#34d399"></div><div class="swatch-info"><span class="swatch-name">Green (Success)</span><span class="swatch-hex">#34d399</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#f59e0b"></div><div class="swatch-info"><span class="swatch-name">Amber (Warning)</span><span class="swatch-hex">#f59e0b</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#ef4444"></div><div class="swatch-info"><span class="swatch-name">Red (Error)</span><span class="swatch-hex">#ef4444</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#a78bfa"></div><div class="swatch-info"><span class="swatch-name">Purple (Vision)</span><span class="swatch-hex">#a78bfa</span></div></div>
  </div>

  <h3 style="font-size:16px;font-weight:700;margin:20px 0 10px">4ã‚¹ã‚¤ãƒƒãƒã‚«ãƒ©ãƒ¼</h3>
  <div class="swatch-grid">
    <div class="swatch"><div class="swatch-color" style="background:#f97316"></div><div class="swatch-info"><span class="swatch-name">ğŸ”¥ Interest</span><span class="swatch-hex">#f97316</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#e879f9"></div><div class="swatch-info"><span class="swatch-name">ğŸŒŸ Novelty</span><span class="swatch-hex">#e879f9</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#4a7dff"></div><div class="swatch-info"><span class="swatch-name">âš¡ Challenge</span><span class="swatch-hex">#4a7dff</span></div></div>
    <div class="swatch"><div class="swatch-color" style="background:#fbbf24"></div><div class="swatch-info"><span class="swatch-name">â° Urgency</span><span class="swatch-hex">#fbbf24</span></div></div>
  </div>

  <div class="code-block"><span class="cm">/* CSS Variables */</span>
<span class="kw">:root</span> {
  <span class="cm">/* 4ã‚¹ã‚¤ãƒƒãƒã‚«ãƒ©ãƒ¼ */</span>
  <span class="fn">--switch-interest</span>: <span class="str">#f97316</span>;   <span class="cm">/* ğŸ”¥ */</span>
  <span class="fn">--switch-novelty</span>: <span class="str">#e879f9</span>;    <span class="cm">/* ğŸŒŸ */</span>
  <span class="fn">--switch-challenge</span>: <span class="str">#4a7dff</span>;  <span class="cm">/* âš¡ */</span>
  <span class="fn">--switch-urgency</span>: <span class="str">#fbbf24</span>;   <span class="cm">/* â° */</span>
}</div>
</div>

<!-- Appendix B: TypeScript Types -->
<div class="section" id="appB">
  <div class="section-eyebrow" style="color:var(--amber)">Appendix B</div>
  <h2 class="action-title">TypeScript å‹å®šç¾©</h2>
  <p class="section-lead">src/lib/api/types.ts â€” Supabaseå‹è‡ªå‹•ç”Ÿæˆã®è£œå®Œã¨ã—ã¦å®šç¾©ã€‚å…¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å‹ã‚’ç¶²ç¾…ã€‚</p>

  <div class="code-block"><span class="cm">// src/lib/api/types.ts</span>

<span class="kw">interface</span> <span class="tp">Task</span> {
  <span class="fn">id</span>: <span class="tp">string</span>;
  <span class="fn">user_id</span>: <span class="tp">string</span>;
  <span class="fn">title</span>: <span class="tp">string</span>;
  <span class="fn">description</span>?: <span class="tp">string</span>;
  <span class="fn">status</span>: <span class="str">'pending'</span> | <span class="str">'in_progress'</span> | <span class="str">'completed'</span> | <span class="str">'cancelled'</span> | <span class="str">'deferred'</span>;
  <span class="fn">switch_interest</span>: <span class="tp">number</span>;    <span class="cm">// 0-10</span>
  <span class="fn">switch_novelty</span>: <span class="tp">number</span>;     <span class="cm">// 0-10</span>
  <span class="fn">switch_challenge</span>: <span class="tp">number</span>;   <span class="cm">// 0-10</span>
  <span class="fn">switch_urgency</span>: <span class="tp">number</span>;    <span class="cm">// 0-10</span>
  <span class="fn">dopamine_score</span>: <span class="tp">number</span>;    <span class="cm">// GENERATED</span>
  <span class="fn">dopamine_phase</span>?: <span class="str">'ignite'</span> | <span class="str">'accelerate'</span> | <span class="str">'sustain'</span> | <span class="str">'switch'</span> | <span class="str">'recover'</span>;
  <span class="fn">estimated_minutes</span>?: <span class="tp">number</span>;
  <span class="fn">actual_minutes</span>?: <span class="tp">number</span>;
  <span class="fn">due_date</span>?: <span class="tp">string</span>;
  <span class="fn">scheduled_block</span>?: <span class="num">1</span> | <span class="num">2</span> | <span class="num">3</span> | <span class="num">4</span>;
  <span class="fn">source</span>: <span class="str">'manual'</span> | <span class="str">'calendar'</span> | <span class="str">'ai_suggested'</span>;
  <span class="fn">parent_task_id</span>?: <span class="tp">string</span>;
  <span class="fn">created_at</span>: <span class="tp">string</span>;
  <span class="fn">updated_at</span>: <span class="tp">string</span>;
  <span class="fn">completed_at</span>?: <span class="tp">string</span>;
}

<span class="kw">interface</span> <span class="tp">DailyCheckin</span> {
  <span class="fn">id</span>: <span class="tp">string</span>;
  <span class="fn">user_id</span>: <span class="tp">string</span>;
  <span class="fn">checkin_date</span>: <span class="tp">string</span>;
  <span class="fn">energy_level</span>: <span class="tp">number</span>;      <span class="cm">// 1-10</span>
  <span class="fn">mood</span>: <span class="str">'great'</span> | <span class="str">'good'</span> | <span class="str">'neutral'</span> | <span class="str">'low'</span> | <span class="str">'struggling'</span>;
  <span class="fn">sleep_quality</span>: <span class="tp">number</span>;     <span class="cm">// 1-5</span>
  <span class="fn">top_priorities</span>: <span class="tp">Array</span>&lt;{ task_id: <span class="tp">string</span>; title: <span class="tp">string</span>; reason: <span class="tp">string</span> }&gt;;
  <span class="fn">ai_daily_plan</span>: <span class="tp">DailyPlan</span>;
  <span class="fn">reflection_notes</span>?: <span class="tp">string</span>;
}

<span class="kw">interface</span> <span class="tp">DailyPlan</span> {
  <span class="fn">blocks</span>: <span class="tp">Array</span>&lt;{
    block_number: <span class="num">1</span> | <span class="num">2</span> | <span class="num">3</span> | <span class="num">4</span>;
    start_time: <span class="tp">string</span>;
    tasks: <span class="tp">Array</span>&lt;{
      task_id: <span class="tp">string</span>;
      title: <span class="tp">string</span>;
      dopamine_phase: <span class="tp">string</span>;
      estimated_minutes: <span class="tp">number</span>;
    }&gt;;
  }&gt;;
  <span class="fn">ignite_tasks</span>: <span class="tp">string[]</span>;
  <span class="fn">recovery_suggestions</span>: <span class="tp">string[]</span>;
  <span class="fn">ai_notes</span>: <span class="tp">string</span>;
}

<span class="kw">interface</span> <span class="tp">CalendarEvent</span> {
  <span class="fn">id</span>: <span class="tp">string</span>;
  <span class="fn">google_event_id</span>: <span class="tp">string</span>;
  <span class="fn">summary</span>: <span class="tp">string</span>;
  <span class="fn">description</span>?: <span class="tp">string</span>;
  <span class="fn">start_time</span>: <span class="tp">string</span>;
  <span class="fn">end_time</span>: <span class="tp">string</span>;
  <span class="fn">location</span>?: <span class="tp">string</span>;
  <span class="fn">is_all_day</span>: <span class="tp">boolean</span>;
  <span class="fn">status</span>: <span class="str">'confirmed'</span> | <span class="str">'tentative'</span> | <span class="str">'cancelled'</span>;
}

<span class="kw">interface</span> <span class="tp">BalanceScore</span> {
  <span class="fn">id</span>: <span class="tp">string</span>;
  <span class="fn">scored_at</span>: <span class="tp">string</span>;
  <span class="fn">period</span>: <span class="str">'daily'</span> | <span class="str">'weekly'</span> | <span class="str">'monthly'</span>;
  <span class="fn">adhd_brain</span>: <span class="tp">number</span>;
  <span class="fn">bio_foundation</span>: <span class="tp">number</span>;
  <span class="fn">ai_driven</span>: <span class="tp">number</span>;
  <span class="fn">aesthetics</span>: <span class="tp">number</span>;
  <span class="fn">interpersonal</span>: <span class="tp">number</span>;
  <span class="fn">family</span>: <span class="tp">number</span>;
  <span class="fn">vision</span>: <span class="tp">number</span>;
  <span class="fn">philosophy</span>: <span class="tp">number</span>;
  <span class="fn">notes</span>?: <span class="tp">string</span>;
  <span class="fn">ai_insights</span>?: <span class="tp">string</span>;
}

<span class="kw">interface</span> <span class="tp">ConversationMessage</span> {
  <span class="fn">id</span>: <span class="tp">string</span>;
  <span class="fn">role</span>: <span class="str">'user'</span> | <span class="str">'assistant'</span> | <span class="str">'system'</span>;
  <span class="fn">content</span>: <span class="tp">string</span>;
  <span class="fn">metadata</span>?: <span class="tp">Record</span>&lt;<span class="tp">string</span>, <span class="tp">any</span>&gt;;
  <span class="fn">created_at</span>: <span class="tp">string</span>;
}</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="footer">
  <p>æ‰èƒ½è§£æ”¾AIã‚³ãƒ¼ãƒ â€” Technical Specification v1.0</p>
  <p>omoshiku Inc. | 2026-02-27 | <a href="sainou-coach-proposal.html">&larr; ä¼ç”»æ›¸ã«æˆ»ã‚‹</a></p>
</div>

</div><!-- main-content -->
</div><!-- page-layout -->

</div><!-- container -->
</body>
</html>
